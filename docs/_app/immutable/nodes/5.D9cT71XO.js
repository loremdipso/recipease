import{d as Nt,t as v,c as at,a as c,s as Q,n as ra,i as oa,e as St}from"../chunks/Br7P6-nc.js";import{q as Et,p as pt,d as gt,c as i,s,r,i as e,f as me,t as T,a as bt,z as M,B as f,ay as It,A as Qe,aJ as ia,C as oe,ap as Lt,G as Xe}from"../chunks/CBx8egCH.js";import{s as Ze}from"../chunks/CVbmqFT_.js";import{i as b}from"../chunks/COUgnmWl.js";import{e as Ee,i as Ie}from"../chunks/IIMqjkV9.js";import{r as dt,b as sa,a as la,s as Ne}from"../chunks/0KIouc5R.js";import{t as na,s as X,c as st}from"../chunks/BODjv-73.js";import{b as Ct,O as ca}from"../chunks/BEvkJWZC.js";import{s as _a,a as $e}from"../chunks/CgSSeZ4p.js";import{a as Ot,b as va,C as da,s as ua}from"../chunks/BRrMQLTx.js";import{b as ut}from"../chunks/Dvnz-3Ma.js";import{p as fa}from"../chunks/CP0Hdb7A.js";import{M as Ft}from"../chunks/B33Gqscv.js";import{F as ie,K as Mt,U as Pe,t as pa,i as ga,d as ba,u as lt,n as ma,o as ha,p as wa,q as ka,b as At}from"../chunks/1AdgqzQS.js";import{t as Pt,f as jt}from"../chunks/B9TfIOaX.js";import{S as Tt}from"../chunks/DFSDZQDY.js";import{n as ft,I as xa,c as zt,w as ya,G as Ra,a as Sa,A as et,l as Ea,e as Ia}from"../chunks/DY5NW6g7.js";import{T as La,L as qt,A as Ca}from"../chunks/Csfl2R9Y.js";import{A as Fa}from"../chunks/CeMNxLT2.js";import{P as Aa}from"../chunks/D1J1T8Ht.js";import{a as Pa}from"../chunks/NG2IHnbz.js";import{H as ja}from"../chunks/Cn3EigTj.js";import{P as Ta}from"../chunks/WMnQWNEA.js";import{S as qa}from"../chunks/B4lOgxD0.js";import{R as Ba}from"../chunks/CnOhg_4D.js";import{T as nt}from"../chunks/vU-L2Mcm.js";import{H as Ka}from"../chunks/BnCe78Zd.js";import{C as Na}from"../chunks/wZHSGgnN.js";import{S as Oa}from"../chunks/DGzatfi9.js";import{R as Ma}from"../chunks/CbakFENS.js";import{P as tt}from"../chunks/Chl4sq6_.js";import"../chunks/D2pXA-vA.js";function ct(a,t={},l,w){for(var k in l){var z=l[k];t[k]!==z&&(l[k]==null?a.style.removeProperty(k):a.style.setProperty(k,z,w))}}function za(a,t,l,w){var k=a.__style;if(Et||k!==t){var z=na(t,w);(!Et||z!==a.getAttribute("style"))&&(z==null?a.removeAttribute("style"):a.style.cssText=z),a.__style=t}else w&&(Array.isArray(w)?(ct(a,l==null?void 0:l[0],w[0]),ct(a,l==null?void 0:l[1],w[1],"important")):ct(a,l,w));return w}var Ga=v("<h2> </h2>"),Ha=v("<h3> </h3>"),Ua=v("<h4> </h4>"),Da=(a,t)=>t.onCloseSection(),Ja=v('<button class="shrink no-print p1" title="Close" aria-label="Close"><!></button>'),Wa=(a,t)=>t.onFocusSection(t.section),Va=v('<button class="shrink no-print p1" title="Focus" aria-label="Focus"><!></button>'),Ya=(a,t,l)=>{t()[e(l).id]=a.target.checked},Qa=v('<span class="svelte-12fzojj"> </span>'),Xa=v('<b class="svelte-12fzojj"> </b>'),Za=v('<b class="svelte-12fzojj"> </b>'),$a=(a,t,l)=>{e(t).id!=null&&e(t).type===ie.Ingredient&&(a.preventDefault(),l.onHighlightKeyword(e(t).id))},er=v("<button> </button>"),tr=v("<span> </span>"),ar=(a,t,l)=>{let w=new Set;for(let k of e(t).fragments)k.id!=null&&k.type===ie.Ingredient&&w.add(k.id);l.onFocusIngredients(w)},rr=v('<button class="bottom-right-floater svelte-12fzojj" title="Focus ingredients" aria-label="Focus ingredients"><!></button>'),or=v('<label><input class="shrink" type="checkbox"> <div class="fragments grow ph0_5 lh2 svelte-12fzojj"></div> <!></label>'),ir=v('<div><header class="flex-row vertically-centered gap1"><!> <!></header> <div class="list"></div></div>');function sr(a,t){pt(t,!0);let l=fa(t,"checked_items",7);function w(m){switch(m.type){case ie.Ingredient:return"ingredient";case ie.Temperature:return"temperature";case ie.Percentage:return"percentage";case ie.Amount:return"amount";default:return""}}function k(m){return!!(t.selectedKeyword&&m.fragments.find(d=>d.id==t.selectedKeyword))}function z(m){if(!t.isFocused&&t.section.text!=="Ingredients"){let d=0;for(let G of m.fragments)G.type===ie.Ingredient&&(d+=1);if(d>=3)return!0}return!1}let Z;gt(()=>{Z&&t.isFocused&&t.section&&Z.scrollIntoView()});var q=ir(),he=i(q),$=i(he);{var p=m=>{var d=Ga(),G=i(d,!0);r(d),T(()=>Q(G,t.section.text)),c(m,d)},je=(m,d)=>{{var G=K=>{var I=Ha(),P=i(I,!0);r(I),T(()=>Q(P,t.section.text)),c(K,I)},de=(K,I)=>{{var P=A=>{var F=Ua(),n=i(F,!0);r(F),T(()=>Q(n,t.section.text)),c(A,F)};b(K,A=>{t.section.level===4&&A(P)},I)}};b(m,K=>{t.section.level===3?K(G):K(de,!1)},d)}};b($,m=>{t.section.level===2?m(p):m(je,!1)})}var B=s($,2);{var ve=m=>{var d=at(),G=me(d);{var de=I=>{var P=Ja();P.__click=[Da,t];var A=i(P);da(A),r(P),c(I,P)},K=I=>{var P=Va();P.__click=[Wa,t];var A=i(P);Ft(A),r(P),c(I,P)};b(G,I=>{t.isFocused?I(de):I(K,!1)})}c(m,d)};b(B,m=>{t.section.rows.length&&m(ve)})}r(he);var ee=s(he,2);Ee(ee,21,()=>t.section.rows,Ie,(m,d)=>{var G=or();let de;var K=i(G);dt(K),K.__change=[Ya,l,d];var I=s(K,2);Ee(I,21,()=>e(d).fragments,Ie,(F,n)=>{var te=at(),Te=me(te);{var Je=se=>{var we=Qa(),qe=i(we,!0);r(we),T(()=>Q(qe,e(n).text)),c(se,we)},Oe=(se,we)=>{{var qe=ke=>{var Le=Xa(),Be=i(Le,!0);r(Le),T(()=>Q(Be,e(n).text)),c(ke,Le)},rt=(ke,Le)=>{{var Be=D=>{var le=Za(),Ke=i(le,!0);r(le),T(()=>Q(Ke,e(n).text)),c(D,le)},Me=(D,le)=>{{var Ke=xe=>{var U=er();let ye;U.__click=[$a,n,t];var ze=i(U,!0);r(U),T((Ce,Fe)=>{ye=X(U,1,Ce,"svelte-12fzojj",ye,Fe),Q(ze,e(n).text)},[()=>st(w(e(n))),()=>({failed:e(n).failed,converted:e(n).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(n).id})]),c(xe,U)},We=xe=>{var U=tr();let ye;var ze=i(U,!0);r(U),T((Ce,Fe)=>{ye=X(U,1,Ce,"svelte-12fzojj",ye,Fe),Q(ze,e(n).text)},[()=>st(w(e(n))),()=>({failed:e(n).failed,converted:e(n).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(n).id})]),c(xe,U)};b(D,xe=>{e(n).type===ie.Ingredient?xe(Ke):xe(We,!1)},le)}};b(ke,D=>{e(n).type===ie.Italic?D(Be):D(Me,!1)},Le)}};b(se,ke=>{e(n).type===ie.Bold?ke(qe):ke(rt,!1)},we)}};b(Te,se=>{e(n).type===ie.Plain?se(Je):se(Oe,!1)})}c(F,te)}),r(I);var P=s(I,2);{var A=F=>{var n=rr();n.__click=[ar,d,t];var te=i(n);Ft(te),r(n),c(F,n)};b(P,F=>{z(e(d))&&F(A)})}r(G),Ot(G,(F,n)=>{var te;return(te=va)==null?void 0:te(F,n)},()=>({enabled:t.isFocused,key:k(e(d))})),T(F=>{de=X(G,1,"relative selectable flex-row ph0",null,de,F),sa(K,l()[e(d).id])},[()=>({selected:k(e(d))})]),c(m,G)}),r(ee),ut(ee,m=>Z=m,()=>Z),r(q),T(()=>X(q,1,st(t.section.rows.length&&!t.isFocused?"card has-list pt0":""))),c(a,q),bt()}Nt(["click","change"]);var lr=v('<div class="spacer svelte-1rjut5w"></div> <div class="focus-pane svelte-1rjut5w"><div class="focus-pane-scroller svelte-1rjut5w"><div class="focus-pane-content"><!></div></div></div>',1);function nr(a,t){pt(t,!0);const l=500;let w=M(void 0),k=M(void 0),z=M("0");gt(()=>{if(t.id!=null&&e(w)&&e(k)){let B=e(k).clientHeight+20;f(z,`min(30vh, ${B}px)`)}});var Z=lr(),q=s(me(Z),2);let he;var $=i(q),p=i($),je=i(p);la(je,()=>t.content),r(p),ut(p,B=>f(k,B),()=>e(k)),r($),Ot($,(B,ve)=>{var ee;return(ee=ua)==null?void 0:ee(B)},()=>({key:t.id})),r(q),ut(q,B=>f(w,B),()=>e(w)),T(()=>he=za(q,"",he,{height:e(z)})),Pt(1,q,()=>jt,()=>({y:"100%",duration:l})),Pt(2,q,()=>jt,()=>({y:"100%",duration:l})),c(a,Z),bt()}const Bt={keep_screen_awake:!0,show_colors:!0};function Gt(){try{let a=localStorage.getItem(Mt.PREFERENCES);if(a)return{...Bt,...JSON.parse(a)}}catch(a){console.error(a)}return{...Bt}}function Ht(a){localStorage.setItem(Mt.PREFERENCES,JSON.stringify({...Gt(),...a}))}function Kt(a){return Gt()[a]}let De=null;const _t=async()=>{document.visibilityState==="visible"&&setTimeout(async()=>await Ut(),1e3)},vt=async(a,t=!0)=>{if(navigator.wakeLock){if(a)await Ut(),document.removeEventListener("visibilitychange",_t),document.addEventListener("visibilitychange",_t);else{console.info("Disabling wake lock");let l=De;De=null,l&&l.release(),document.removeEventListener("visibilitychange",_t)}t&&Ht({keep_screen_awake:a})}},Ut=async()=>{try{if(De)try{console.info("Releasing old wake lock"),await De.release()}catch{}De=await navigator.wakeLock.request("screen"),console.info("Wake Lock is active")}catch(a){console.error(a)}};var cr=ra(`<svg fill="white" height="16px" width="16px" style="min-width: 16px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.005 512.005" xml:space="preserve"><g><g><path d="M388.418,240.923L153.751,6.256c-8.341-8.341-21.824-8.341-30.165,0s-8.341,21.824,0,30.165L343.17,256.005
			L123.586,475.589c-8.341,8.341-8.341,21.824,0,30.165c4.16,4.16,9.621,6.251,15.083,6.251c5.461,0,10.923-2.091,15.083-6.251
			l234.667-234.667C396.759,262.747,396.759,249.264,388.418,240.923z"></path></g></g></svg>`);function _r(a){var t=cr();c(a,t)}var vr=v("<input>"),dr=(a,t)=>zt("/my-recipes",{page_data:{is_going_back:!0,previously_selected_recipe:e(t)}}),ur=v('<button class="shrink white-text flex-row vertically-centered p0 gap0_5" title="Go back" aria-label="Go back"><h1> </h1></button>'),fr=(a,t)=>{f(t,"")},pr=(a,t)=>{t()},gr=v('<button class="shrink pl1"><!></button> <button class="shrink pl1"><!></button>',1),br=(a,t,l)=>{var w;f(t,((w=e(l))==null?void 0:w.title)||"",!0)},mr=v('<button class="shrink pl1" title="Edit" aria-label="Edit"><!></button>'),hr=v('<div class="flex-row vertically-centered grow svelte-wd4g5o"><div class="grow flex-col"><!></div> <!></div>'),wr=async(a,t,l)=>{e(t)?(ft("Reloading..."),await l(!0)):ft("No url!","error")},kr=async(a,t)=>{if(e(t)){let l=ma(e(t));await ya(l),ft("Copied markdown to clipboard :)")}},xr=async()=>{window.print()},yr=async(a,t,l)=>{f(t,e(l),!0)},Rr=v('<button class="warning">Delete recipe</button>'),Sr=v('<div class="flex-col svelte-wd4g5o"><a target="_blank">Open the original</a> <button>Get markdown</button> <button>Print</button> <a target="_blank">Report bug</a> <!> <!> <!></div>'),Er=v('<!> <!> <!> <!> <button title="Reload this recipe" aria-label="Reload this recipe" class="svelte-wd4g5o"><!></button> <!>',1),Ir=v('<div class="card mt1"><h2>Loading...</h2></div>'),Lr=v('<div class="mla"><!></div>'),Cr=(a,t,l)=>{t(l())},Fr=v('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Remove from current list</button>'),Ar=(a,t,l)=>{t(l())},Pr=v('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Add to current list</button>'),jr=(a,t)=>t(.5),Tr=(a,t)=>t(1),qr=(a,t)=>t(2),Br=(a,t)=>t(Pe.IMPERIAL),Kr=(a,t)=>t(Pe.ORIGINAL),Nr=(a,t)=>t(Pe.METRIC),Or=(a,t)=>{f(t,!0)},Mr=v('<div class="rounded black p0_5 green-text"> </div>'),zr=v('<div class="shrink flex-row flex-end wrap gap2 bold"></div>'),Gr=v('<div class="flex-row gap1 space-between no-print"><!> <!></div> <div class="flex-col gap1 mb1 mt1 no-print"><div class="flex-row vertically-centered wrap rgap0_5"><!></div> <div class="flex-row gap1 mb1 mt1 wrap"><div class="flex-row gap1"><div class="flex-row"><button>0.5x</button> <button>1x</button> <button>2x</button></div></div> <div class="flex-row grow-children"><button>Imperial</button> <button>Original</button> <button>Metric</button></div></div> <div class="mla flex-col wrap vertically-centered shrink-children gap0_5"><button class="mla rounded blue p0_5 vertically-centered gap0_5"><!> Add tags</button> <!></div></div> <div class="recipe-columns flex-col gap1 svelte-wd4g5o"><div class="flex-col gap1 svelte-wd4g5o"></div> <div class="flex-col gap1 svelte-wd4g5o"><!> <!></div></div>',1),Hr=v('<div class="card mt1"><h2>ERROR: No recipe :/</h2></div>'),Ur=v('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),Dr=(a,t,l)=>{t(e(l))},Jr=v('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),Wr=(a,t)=>{f(t,!1)},Vr=(a,t)=>{t()},Yr=v('<button class="flex-row rounded green gap0_5 vertically-centered" title="Save" aria-label="Save"><!> Add new tag</button>'),Qr=v('<div class="flex-col gap1 svelte-wd4g5o"><h2>Tags</h2> <div><h3>Current tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div><h3>Other tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div class="flex-row vertically-centered"><label class="flex-row wrap gap0_5">Create new tag: <input class="grow downcase"></label></div> <div class="flex-row flex-end gap1"><button class="mla">Close</button> <!></div></div>'),Xr=v('<!> <main class="svelte-wd4g5o"><div class="flex-col gap2 svelte-wd4g5o"><!></div> <!> <!></main> <!> <!>',1);function Ao(a,t){pt(t,!0);const[l,w]=_a(),k=()=>$e(m,"$data",l),z=()=>$e(Sa,"$all_recipes",l),Z=()=>$e(Ia,"$all_shopping_lists",l),q=()=>$e(Ea,"$last_list_id",l),he=o=>{$(o,()=>e(A),()=>!0)},$=(o,_=Lt,y=Lt)=>{sr(o,{get section(){return _()},get isFocused(){return y()},get selectedKeyword(){return e(I)},get checked_items(){return e(P)},onHighlightKeyword:x=>{x===e(I)?f(I,null):(f(I,x,!0),x&&Be(new Set([x])))},onFocusIngredients:Be,onFocusSection:x=>{var R;_().id===((R=e(A))==null?void 0:R.id)?f(A,null):f(A,_(),!0)},onCloseSection:()=>{f(A,null)}})};let p=M(null);It(()=>{je()}),Pa(()=>{je()});function je(){let o=xa();o!==e(p)&&f(p,o,!0)}let B=M(Qe(Pe.ORIGINAL)),ve=M(1),ee=M(Qe(Kt("show_colors")));const m=ia(null),d=oe(()=>ga(k(),e(ee))),G=oe(()=>[...new Set(z().map(o=>o.tags).filter(o=>!!o).flat().toSorted())]),de=oe(()=>e(p)?wa(e(p),z()):null),K=oe(()=>e(p)?ka(e(p),z()):null);let I=M(null),P=M(Qe({})),A=M(null),F=M(null),n=M(null),te=M(!1),Te=oe(()=>ha(e(d),e(ee),e(B),e(ve))),Je=null;gt(()=>{e(p)!==Je&&(Je=e(p),(async()=>we(!1))())});function Oe(o){o!==e(B)&&f(B,o,!0)}function se(o){et(o,e(ve))||f(ve,o,!0)}async function we(o=!1){f(P,{},!0),f(te,!0),m.set(await pa(e(p),"",o)),f(te,!1),f(I,null),f(A,null)}function qe(){m&&m.update(o=>(o&&e(n)&&(o.title=e(n),lt(Ze(o))),o)),f(n,null)}let rt=oe(()=>{var o;return!!((o=Z().find(_=>_.id===q()))!=null&&o.items.find(_=>_.recipe_url===e(p)))});function ke(o){let _=!1;for(let y of Z())if(y.id===o){for(let x of y.items)x.recipe_url===e(p)&&(x.quantity+=1,_=!0);_||(_=!0,y.items.push({recipe_url:e(p),quantity:1})),At(y);break}}function Le(o){for(let _ of Z())_.id===o&&(_.items=_.items.filter(y=>y.recipe_url!==e(p)),At(_))}function Be(o){let _=[];for(let y of e(Te).ingredients)for(let x of y.rows)x.fragments.find(R=>R.id&&o.has(R.id))&&_.push(Ze(x));f(A,{id:Ra("section"),text:"Selected ingredients",level:3,rows:_},!0)}let Me=M(Qe(Kt("keep_screen_awake"))),D=M(""),le=M(!1);It(()=>((async()=>await vt(e(Me),!1))(),async()=>{await vt(!1,!1)}));function Ke(){We(e(D).toLowerCase()),f(D,"")}function We(o){m.update(_=>(_&&o&&(_.tags?_.tags.some(y=>y===o)||_.tags.push(o):_.tags=[o],lt(Ze(_))),_))}let xe=oe(()=>`https://github.com/loremdipso/recipease/issues/new?title=${encodeURIComponent("Broken URL")}&body=${encodeURIComponent(`URL in question: ${e(p)}

Why it is bad: TODO`)}&labels=parsing`);var U=Xr(),ye=me(U);const ze=oe(()=>({previously_selected_recipe:e(p)}));La(ye,{back_path:"/my-recipes",get page_data(){return e(ze)},title_snippet:y=>{var x=hr(),R=i(x),J=i(R);{var W=L=>{var h=vr();dt(h),oa(h),St("keypress",h,g=>{g.key==="Enter"&&(g.preventDefault(),g.stopPropagation(),qe())}),Ct(h,()=>e(n),g=>f(n,g)),c(L,h)},ne=L=>{var h=ur();h.__click=[dr,p];var g=i(h),V=i(g,!0);r(g),r(h),T(()=>{var u;return Q(V,(u=e(d))==null?void 0:u.title)}),c(L,h)};b(J,L=>{e(n)?L(W):L(ne,!1)})}r(R);var ue=s(R,2);{var ae=L=>{var h=gr(),g=me(h);g.__click=[fr,n];var V=i(g);nt(V),r(g);var u=s(g,2);u.__click=[pr,qe];var C=i(u);qa(C),r(u),T(()=>{Ne(g,"title",e(n)?"Save":"Edit"),Ne(g,"aria-label",e(n)?"Save":"Edit"),Ne(u,"title",e(n)?"Save":"Edit"),Ne(u,"aria-label",e(n)?"Save":"Edit")}),c(L,h)},fe=L=>{var h=mr();h.__click=[br,n,d];var g=i(h);Ta(g),r(h),c(L,h)};b(ue,L=>{e(n)?L(ae):L(fe,!1)})}r(x),c(y,x)},extra_buttons:y=>{var x=Er(),R=me(x);Ma(R,{go_back:!0});var J=s(R,2);Na(J,{go_back:!1});var W=s(J,2);Ka(W);var ne=s(W,2);{var ue=g=>{Oa(g,{onshare:async()=>{const V=new URL(window.location.href);V.search="",e(p)&&V.searchParams.set("url",e(p)),await navigator.share({title:"Here's a recipe for ya!",url:V.toString()})}})};b(ne,g=>{e(d)&&g(ue)})}var ae=s(ne,2);ae.__click=[wr,p,we];var fe=i(ae);Ba(fe),r(ae);var L=s(ae,2);{var h=g=>{ja(g,{items:u=>{var C=Sr(),N=i(C);let re;var pe=s(N,2);pe.__click=[kr,d];var j=s(pe,2);j.__click=[xr];var O=s(j,2);let ce;var Ae=s(O,2);Tt(Ae,{text:"Enable colors",get checked(){return e(ee)},onchange:H=>{f(ee,H,!0),Ht({show_colors:H})}});var Ge=s(Ae,2);{var He=H=>{Tt(H,{text:"Keep screen on",get checked(){return e(Me)},onchange:_e=>{f(Me,_e,!0),vt(_e)}})};b(Ge,H=>{navigator.wakeLock&&H(He)})}var Ve=s(Ge,2);{var Ue=H=>{var _e=Rr();_e.__click=[yr,F,p],c(H,_e)};b(Ve,H=>{e(d)&&H(Ue)})}r(C),T((H,_e)=>{Ne(N,"href",e(p)),re=X(N,1,"button-like",null,re,H),Ne(O,"href",e(xe)),ce=X(O,1,"warning button-like",null,ce,_e)},[()=>({disabled:!e(p)}),()=>({disabled:!e(p)})]),c(u,C)}})};b(L,g=>{e(d)&&g(h)})}c(y,x)},$$slots:{title_snippet:!0,extra_buttons:!0}});var Ce=s(ye,2),Fe=i(Ce),Dt=i(Fe);{var Jt=o=>{var _=Ir();c(o,_)},Wt=(o,_)=>{{var y=R=>{var J=Gr(),W=me(J),ne=i(W);{var ue=S=>{const E=oe(()=>({url:e(de).url}));qt(S,{url:"/my-recipes/recipe",get query_params(){return e(E)},go_back:!0,text:"Previous recipe",icon_prefix:ge=>{Ca(ge)},$$slots:{icon_prefix:!0}})};b(ne,S=>{e(de)&&S(ue)})}var ae=s(ne,2);{var fe=S=>{var E=Lr(),Re=i(E);const ge=oe(()=>({url:e(K).url}));qt(Re,{url:"/my-recipes/recipe",get query_params(){return e(ge)},go_back:!0,text:"Next recipe",icon_postfix:Y=>{_r(Y)},$$slots:{icon_postfix:!0}}),r(E),c(S,E)};b(ae,S=>{e(K)&&S(fe)})}r(W);var L=s(W,2),h=i(L),g=i(h);{var V=S=>{var E=at(),Re=me(E);{var ge=Y=>{var be=Fr();be.__click=[Cr,Le,q];var it=i(be);nt(it),Xe(),r(be),c(Y,be)},Se=Y=>{var be=Pr();be.__click=[Ar,ke,q];var it=i(be);tt(it),Xe(),r(be),c(Y,be)};b(Re,Y=>{e(rt)?Y(ge):Y(Se,!1)})}c(S,E)};b(g,S=>{q()!==null&&S(V)})}r(h);var u=s(h,2),C=i(u),N=i(C),re=i(N);let pe;re.__click=[jr,se];var j=s(re,2);let O;j.__click=[Tr,se];var ce=s(j,2);let Ae;ce.__click=[qr,se],r(N),r(C);var Ge=s(C,2),He=i(Ge);let Ve;He.__click=[Br,Oe];var Ue=s(He,2);let H;Ue.__click=[Kr,Oe];var _e=s(Ue,2);let wt;_e.__click=[Nr,Oe],r(Ge),r(u);var kt=s(u,2),Ye=i(kt);Ye.__click=[Or,le];var $t=i(Ye);tt($t),Xe(),r(Ye);var ea=s(Ye,2);{var ta=S=>{var E=zr();Ee(E,21,()=>e(d).tags||[],Ie,(Re,ge)=>{var Se=Mr(),Y=i(Se,!0);r(Se),T(()=>Q(Y,e(ge))),c(Re,Se)}),r(E),c(S,E)};b(ea,S=>{var E;(E=e(d).tags)!=null&&E.length&&S(ta)})}r(kt),r(L);var xt=s(L,2),ot=i(xt);Ee(ot,21,()=>e(Te).ingredients,Ie,(S,E)=>{$(S,()=>e(E),()=>!1)}),r(ot);var yt=s(ot,2),Rt=i(yt);Ee(Rt,17,()=>e(Te).instructions,Ie,(S,E)=>{$(S,()=>e(E),()=>!1)});var aa=s(Rt,2);Ee(aa,17,()=>e(Te).notes,Ie,(S,E)=>{$(S,()=>e(E),()=>!1)}),r(yt),r(xt),T((S,E,Re,ge,Se,Y)=>{pe=X(re,1,"choice-button svelte-wd4g5o",null,pe,S),O=X(j,1,"choice-button svelte-wd4g5o",null,O,E),Ae=X(ce,1,"choice-button svelte-wd4g5o",null,Ae,Re),Ve=X(He,1,"choice-button svelte-wd4g5o",null,Ve,ge),H=X(Ue,1,"choice-button svelte-wd4g5o",null,H,Se),wt=X(_e,1,"choice-button svelte-wd4g5o",null,wt,Y)},[()=>({selected:et(e(ve),.5)}),()=>({selected:et(e(ve),1)}),()=>({selected:et(e(ve),2)}),()=>({selected:e(B)==Pe.IMPERIAL}),()=>({selected:e(B)==Pe.ORIGINAL}),()=>({selected:e(B)==Pe.METRIC})]),c(R,J)},x=R=>{var J=Hr();c(R,J)};b(o,R=>{e(d)?R(y):R(x,!1)},_)}};b(Dt,o=>{e(te)?o(Jt):o(Wt,!1)})}r(Fe);var mt=s(Fe,2);{var Vt=o=>{Aa(o,{text:"Are you sure?",accept:async()=>{e(F)&&(await ba(e(F)),f(F,null),zt("/my-recipes",{page_data:{is_going_back:!0}}))},cancel:()=>{f(F,null)}})};b(mt,o=>{e(F)&&o(Vt)})}var Yt=s(mt,2);{var Qt=o=>{const _=oe(()=>{var y;return(y=e(A))==null?void 0:y.id});nr(o,{content:he,get id(){return e(_)}})};b(Yt,o=>{e(A)&&o(Qt)})}r(Ce);var ht=s(Ce,2);Fa(ht,{});var Xt=s(ht,2);{var Zt=o=>{ca(o,{click:()=>{f(le,!1)},content:y=>{var x=Qr(),R=s(i(x),2),J=s(i(R),2);Ee(J,5,()=>{var u;return((u=k())==null?void 0:u.tags)||[]},Ie,(u,C)=>{var N=Ur();N.__click=()=>{m.update(j=>(j!=null&&j.tags&&(j.tags=j.tags.filter(O=>O!==e(C)),lt(Ze(j))),j))};var re=i(N);nt(re);var pe=s(re);r(N),T(()=>Q(pe,` ${e(C)??""}`)),c(u,N)}),r(J),r(R);var W=s(R,2),ne=s(i(W),2);Ee(ne,21,()=>e(G),Ie,(u,C)=>{var N=at(),re=me(N);{var pe=j=>{var O=Jr();O.__click=[Dr,We,C];var ce=i(O);tt(ce);var Ae=s(ce);r(O),T(()=>Q(Ae,` ${e(C)??""}`)),c(j,O)};b(re,j=>{var O;(!((O=k())!=null&&O.tags)||!k().tags.some(ce=>ce==e(C)))&&j(pe)})}c(u,N)}),r(ne),r(W);var ue=s(W,2),ae=i(ue),fe=s(i(ae));dt(fe),r(ae),r(ue);var L=s(ue,2),h=i(L);h.__click=[Wr,le];var g=s(h,2);{var V=u=>{var C=Yr();C.__click=[Vr,Ke];var N=i(C);tt(N),Xe(),r(C),c(u,C)};b(g,u=>{e(D)&&u(V)})}r(L),r(x),St("keypress",fe,u=>{u.key==="Enter"&&(u.stopPropagation(),u.preventDefault(),Ke())}),Ct(fe,()=>e(D),u=>f(D,u)),c(y,x)},$$slots:{content:!0}})};b(Xt,o=>{e(le)&&o(Zt)})}c(a,U),bt(),w()}Nt(["click"]);export{Ao as component};
