import{d as Nt,t as v,c as tt,a as c,s as oe,n as ea,i as ta,e as Et}from"../chunks/CYIjoMr1.js";import{O as Rt,p as pt,d as gt,c as i,s as l,r as o,i as e,f as be,t as j,a as bt,l as M,n as d,av as St,m as Ye,aJ as aa,o as ae,am as It,x as Qe}from"../chunks/DdW1EsoA.js";import{s as Xe}from"../chunks/CglLUYzN.js";import{i as h}from"../chunks/xsFzECmQ.js";import{e as Le,i as Fe}from"../chunks/DWk5ghVn.js";import{r as ut,b as ra,a as oa,s as Ne}from"../chunks/BhOZLbEh.js";import{t as ia,s as Y,c as st}from"../chunks/B7XJn2s4.js";import{b as Lt,O as sa}from"../chunks/Cg7dEFf2.js";import{s as la,a as Ze}from"../chunks/CkSXy_xo.js";import{a as Bt,b as na,C as ca,s as _a}from"../chunks/YJ_dkEMD.js";import{b as dt}from"../chunks/CVM884pq.js";import{p as va}from"../chunks/Dj8bsD46.js";import{M as Ft}from"../chunks/D3fA0VwG.js";import{F as re,K as qt,U as Ce,t as ua,i as da,d as fa,u as lt,m as pa,n as ga,o as ba,p as ma,b as Ct}from"../chunks/DmioJiEo.js";import{t as Pt,a as At}from"../chunks/DQ6ywEsN.js";import{S as jt}from"../chunks/BJl-EtSc.js";import{n as ft,G as ha,e as Mt,w as wa,E as ka,a as xa,y as $e,l as ya,c as Ea}from"../chunks/BfBYdUds.js";import{T as Ra,L as Tt,A as Sa}from"../chunks/DthNnMJE.js";import{A as Ia}from"../chunks/MAbwEkBc.js";import{P as La}from"../chunks/CjA7HIXi.js";import{a as Fa}from"../chunks/BCYYOsBJ.js";import{H as Ca}from"../chunks/BxaRdmnM.js";import{P as Pa}from"../chunks/GWXM1Sqk.js";import{S as Aa}from"../chunks/C19GrMxj.js";import{R as ja}from"../chunks/Difl6JaO.js";import{T as nt}from"../chunks/AmogBFoe.js";import{H as Ta}from"../chunks/u4aGkRaH.js";import{C as Oa}from"../chunks/CLpTXNSu.js";import{S as Ka}from"../chunks/DIRDfxQS.js";import{R as Na}from"../chunks/DCYLYZPZ.js";import{P as et}from"../chunks/CRXheolD.js";import"../chunks/mJewewNG.js";function ct(a,t={},s,w){for(var k in s){var z=s[k];t[k]!==z&&(s[k]==null?a.style.removeProperty(k):a.style.setProperty(k,z,w))}}function Ba(a,t,s,w){var k=a.__style;if(Rt||k!==t){var z=ia(t,w);(!Rt||z!==a.getAttribute("style"))&&(z==null?a.removeAttribute("style"):a.style.cssText=z),a.__style=t}else w&&(Array.isArray(w)?(ct(a,s==null?void 0:s[0],w[0]),ct(a,s==null?void 0:s[1],w[1],"important")):ct(a,s,w));return w}var qa=v("<h2> </h2>"),Ma=v("<h3> </h3>"),za=v("<h4> </h4>"),Ha=(a,t)=>t.onCloseSection(),Ua=v('<button class="shrink no-print p1" title="Close" aria-label="Close"><!></button>'),Da=(a,t)=>t.onFocusSection(t.section),Ga=v('<button class="shrink no-print p1" title="Focus" aria-label="Focus"><!></button>'),Ja=(a,t,s)=>{t()[e(s).id]=a.target.checked},Wa=v('<span class="svelte-12fzojj"> </span>'),Va=v('<b class="svelte-12fzojj"> </b>'),Ya=v('<b class="svelte-12fzojj"> </b>'),Qa=(a,t,s)=>{e(t).id!=null&&e(t).type===re.Ingredient&&(a.preventDefault(),s.onHighlightKeyword(e(t).id))},Xa=v("<button> </button>"),Za=v("<span> </span>"),$a=(a,t,s)=>{let w=new Set;for(let k of e(t).fragments)k.id!=null&&k.type===re.Ingredient&&w.add(k.id);s.onFocusIngredients(w)},er=v('<button class="bottom-right-floater svelte-12fzojj" title="Focus ingredients" aria-label="Focus ingredients"><!></button>'),tr=v('<label><input class="shrink" type="checkbox"> <div class="fragments grow ph0_5 lh2 svelte-12fzojj"></div> <!></label>'),ar=v('<div><header class="flex-row vertically-centered gap1"><!> <!></header> <div class="list"></div></div>');function rr(a,t){pt(t,!0);let s=va(t,"checked_items",7);function w(b){switch(b.type){case re.Ingredient:return"ingredient";case re.Temperature:return"temperature";case re.Percentage:return"percentage";case re.Amount:return"amount";default:return""}}function k(b){return!!(t.selectedKeyword&&b.fragments.find(f=>f.id==t.selectedKeyword))}function z(b){if(!t.isFocused&&t.section.text!=="Ingredients"){let f=0;for(let H of b.fragments)H.type===re.Ingredient&&(f+=1);if(f>=3)return!0}return!1}let Q;gt(()=>{Q&&t.isFocused&&t.section&&Q.scrollIntoView()});var T=ar(),me=i(T),X=i(me);{var p=b=>{var f=qa(),H=i(f,!0);o(f),j(()=>oe(H,t.section.text)),c(b,f)},Pe=(b,f)=>{{var H=K=>{var R=Ma(),P=i(R,!0);o(R),j(()=>oe(P,t.section.text)),c(K,R)},ue=(K,R)=>{{var P=F=>{var L=za(),n=i(L,!0);o(L),j(()=>oe(n,t.section.text)),c(F,L)};h(K,F=>{t.section.level===4&&F(P)},R)}};h(b,K=>{t.section.level===3?K(H):K(ue,!1)},f)}};h(X,b=>{t.section.level===2?b(p):b(Pe,!1)})}var O=l(X,2);{var ve=b=>{var f=tt(),H=be(f);{var ue=R=>{var P=Ua();P.__click=[Ha,t];var F=i(P);ca(F),o(P),c(R,P)},K=R=>{var P=Ga();P.__click=[Da,t];var F=i(P);Ft(F),o(P),c(R,P)};h(H,R=>{t.isFocused?R(ue):R(K,!1)})}c(b,f)};h(O,b=>{t.section.rows.length&&b(ve)})}o(me);var Z=l(me,2);Le(Z,21,()=>t.section.rows,Fe,(b,f)=>{var H=tr();let ue;var K=i(H);ut(K),K.__change=[Ja,s,f];var R=l(K,2);Le(R,21,()=>e(f).fragments,Fe,(L,n)=>{var $=tt(),Ae=be($);{var Ge=ie=>{var he=Wa(),je=i(he,!0);o(he),j(()=>oe(je,e(n).text)),c(ie,he)},Be=(ie,he)=>{{var je=we=>{var ye=Va(),Te=i(ye,!0);o(ye),j(()=>oe(Te,e(n).text)),c(we,ye)},at=(we,ye)=>{{var Te=G=>{var se=Ya(),Oe=i(se,!0);o(se),j(()=>oe(Oe,e(n).text)),c(G,se)},qe=(G,se)=>{{var Oe=ke=>{var D=Xa();let xe;D.__click=[Qa,n,t];var Me=i(D,!0);o(D),j((Ee,Re)=>{xe=Y(D,1,Ee,"svelte-12fzojj",xe,Re),oe(Me,e(n).text)},[()=>st(w(e(n))),()=>({failed:e(n).failed,converted:e(n).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(n).id})]),c(ke,D)},Je=ke=>{var D=Za();let xe;var Me=i(D,!0);o(D),j((Ee,Re)=>{xe=Y(D,1,Ee,"svelte-12fzojj",xe,Re),oe(Me,e(n).text)},[()=>st(w(e(n))),()=>({failed:e(n).failed,converted:e(n).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(n).id})]),c(ke,D)};h(G,ke=>{e(n).type===re.Ingredient?ke(Oe):ke(Je,!1)},se)}};h(we,G=>{e(n).type===re.Italic?G(Te):G(qe,!1)},ye)}};h(ie,we=>{e(n).type===re.Bold?we(je):we(at,!1)},he)}};h(Ae,ie=>{e(n).type===re.Plain?ie(Ge):ie(Be,!1)})}c(L,$)}),o(R);var P=l(R,2);{var F=L=>{var n=er();n.__click=[$a,f,t];var $=i(n);Ft($),o(n),c(L,n)};h(P,L=>{z(e(f))&&L(F)})}o(H),Bt(H,(L,n)=>{var $;return($=na)==null?void 0:$(L,n)},()=>({enabled:t.isFocused,key:k(e(f))})),j(L=>{ue=Y(H,1,"relative selectable flex-row ph0",null,ue,L),ra(K,s()[e(f).id])},[()=>({selected:k(e(f))})]),c(b,H)}),o(Z),dt(Z,b=>Q=b,()=>Q),o(T),j(()=>Y(T,1,st(t.section.rows.length&&!t.isFocused?"card has-list pt0":""))),c(a,T),bt()}Nt(["click","change"]);var or=v('<div class="spacer svelte-1rjut5w"></div> <div class="focus-pane svelte-1rjut5w"><div class="focus-pane-scroller svelte-1rjut5w"><div class="focus-pane-content"><!></div></div></div>',1);function ir(a,t){pt(t,!0);const s=500;let w=M(void 0),k=M(void 0),z=M("0");gt(()=>{if(t.id!=null&&e(w)&&e(k)){let O=e(k).clientHeight+20;d(z,`min(30vh, ${O}px)`)}});var Q=or(),T=l(be(Q),2);let me;var X=i(T),p=i(X),Pe=i(p);oa(Pe,()=>t.content),o(p),dt(p,O=>d(k,O),()=>e(k)),o(X),Bt(X,(O,ve)=>{var Z;return(Z=_a)==null?void 0:Z(O)},()=>({key:t.id})),o(T),dt(T,O=>d(w,O),()=>e(w)),j(()=>me=Ba(T,"",me,{height:e(z)})),Pt(1,T,()=>At,()=>({y:"100%",duration:s})),Pt(2,T,()=>At,()=>({y:"100%",duration:s})),c(a,Q),bt()}const Ot={keep_screen_awake:!0,show_colors:!0};function zt(){try{let a=localStorage.getItem(qt.PREFERENCES);if(a)return{...Ot,...JSON.parse(a)}}catch(a){console.error(a)}return{...Ot}}function Ht(a){localStorage.setItem(qt.PREFERENCES,JSON.stringify({...zt(),...a}))}function Kt(a){return zt()[a]}let De=null;const _t=async()=>{document.visibilityState==="visible"&&setTimeout(async()=>await Ut(),1e3)},vt=async(a,t=!0)=>{if(navigator.wakeLock){if(a)await Ut(),document.removeEventListener("visibilitychange",_t),document.addEventListener("visibilitychange",_t);else{console.info("Disabling wake lock");let s=De;De=null,s&&s.release(),document.removeEventListener("visibilitychange",_t)}t&&Ht({keep_screen_awake:a})}},Ut=async()=>{try{if(De)try{console.info("Releasing old wake lock"),await De.release()}catch{}De=await navigator.wakeLock.request("screen"),console.info("Wake Lock is active")}catch(a){console.error(a)}};var sr=ea(`<svg fill="white" height="16px" width="16px" style="min-width: 16px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.005 512.005" xml:space="preserve"><g><g><path d="M388.418,240.923L153.751,6.256c-8.341-8.341-21.824-8.341-30.165,0s-8.341,21.824,0,30.165L343.17,256.005
			L123.586,475.589c-8.341,8.341-8.341,21.824,0,30.165c4.16,4.16,9.621,6.251,15.083,6.251c5.461,0,10.923-2.091,15.083-6.251
			l234.667-234.667C396.759,262.747,396.759,249.264,388.418,240.923z"></path></g></g></svg>`);function lr(a){var t=sr();c(a,t)}var nr=v("<input>"),cr=(a,t)=>Mt("/my-recipes",{page_data:{is_going_back:!0,previously_selected_recipe:e(t)}}),_r=v('<button class="shrink white-text flex-row vertically-centered p0 gap0_5" title="Go back" aria-label="Go back"><h1> </h1></button>'),vr=(a,t)=>{d(t,"")},ur=(a,t)=>{t()},dr=v('<button class="shrink pl1"><!></button> <button class="shrink pl1"><!></button>',1),fr=(a,t,s)=>{var w;d(t,((w=e(s))==null?void 0:w.title)||"",!0)},pr=v('<button class="shrink pl1" title="Edit" aria-label="Edit"><!></button>'),gr=v('<div class="flex-row vertically-centered grow svelte-wd4g5o"><div class="grow flex-col"><!></div> <!></div>'),br=async(a,t,s)=>{e(t)?(ft("Reloading..."),await s(!0)):ft("No url!","error")},mr=async(a,t)=>{if(e(t)){let s=pa(e(t));await wa(s),ft("Copied markdown to clipboard :)")}},hr=async()=>{window.print()},wr=async(a,t,s)=>{d(t,e(s),!0)},kr=v('<button class="warning">Delete recipe</button>'),xr=v('<div class="flex-col svelte-wd4g5o"><a target="_blank">Open the original</a> <button>Get markdown</button> <button>Print</button> <a target="_blank">Report bug</a> <!> <!> <!></div>'),yr=v('<!> <!> <!> <!> <button title="Reload this recipe" aria-label="Reload this recipe" class="svelte-wd4g5o"><!></button> <!>',1),Er=v('<div class="card mt1"><h2>Loading...</h2></div>'),Rr=v('<div class="mla"><!></div>'),Sr=(a,t,s)=>{t(s())},Ir=v('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Remove from current list</button>'),Lr=(a,t,s)=>{t(s())},Fr=v('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Add to current list</button>'),Cr=(a,t)=>t(.5),Pr=(a,t)=>t(1),Ar=(a,t)=>t(2),jr=(a,t)=>t(Ce.IMPERIAL),Tr=(a,t)=>t(Ce.ORIGINAL),Or=(a,t)=>t(Ce.METRIC),Kr=(a,t)=>{d(t,!0)},Nr=v('<div class="flex-row gap1 space-between no-print"><!> <!></div> <div class="flex-col gap1 mb1 mt1 no-print"><div class="flex-row vertically-centered wrap rgap0_5"><!></div> <div class="flex-row gap1 mb1 mt1 wrap"><div class="flex-row gap1"><div class="flex-row"><button>0.5x</button> <button>1x</button> <button>2x</button></div></div> <div class="flex-row grow-children"><button>Imperial</button> <button>Original</button> <button>Metric</button></div></div> <button class="mla rounded blue p0_5 vertically-centered gap0_5"><!> Add tags</button></div> <div class="recipe-columns flex-col gap1 svelte-wd4g5o"><div class="flex-col gap1 svelte-wd4g5o"></div> <div class="flex-col gap1 svelte-wd4g5o"><!> <!></div></div>',1),Br=v('<div class="card mt1"><h2>ERROR: No recipe :/</h2></div>'),qr=v('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),Mr=(a,t,s)=>{t(e(s))},zr=v('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),Hr=(a,t)=>{d(t,!1)},Ur=(a,t)=>{t()},Dr=v('<button class="flex-row rounded green gap0_5 vertically-centered" title="Save" aria-label="Save"><!> Add new tag</button>'),Gr=v('<div class="flex-col gap1 svelte-wd4g5o"><h2>Tags</h2> <div><h3>Current tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div><h3>Other tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div class="flex-row vertically-centered"><label class="flex-row wrap gap0_5">Create new tag: <input class="grow downcase"></label></div> <div class="flex-row flex-end gap1"><button class="mla">Close</button> <!></div></div>'),Jr=v('<!> <main class="svelte-wd4g5o"><div class="flex-col gap2 svelte-wd4g5o"><!></div> <!> <!></main> <!> <!>',1);function So(a,t){pt(t,!0);const[s,w]=la(),k=()=>Ze(b,"$data",s),z=()=>Ze(xa,"$all_recipes",s),Q=()=>Ze(Ea,"$all_shopping_lists",s),T=()=>Ze(ya,"$last_list_id",s),me=r=>{X(r,()=>e(F),()=>!0)},X=(r,_=It,y=It)=>{rr(r,{get section(){return _()},get isFocused(){return y()},get selectedKeyword(){return e(R)},get checked_items(){return e(P)},onHighlightKeyword:x=>{x===e(R)?d(R,null):(d(R,x,!0),x&&Te(new Set([x])))},onFocusIngredients:Te,onFocusSection:x=>{var E;_().id===((E=e(F))==null?void 0:E.id)?d(F,null):d(F,_(),!0)},onCloseSection:()=>{d(F,null)}})};let p=M(null);St(()=>{Pe()}),Fa(()=>{Pe()});function Pe(){let r=ha();r!==e(p)&&d(p,r,!0)}let O=M(Ye(Ce.ORIGINAL)),ve=M(1),Z=M(Ye(Kt("show_colors")));const b=aa(null),f=ae(()=>da(k(),e(Z))),H=ae(()=>[...new Set(z().map(r=>r.tags).filter(r=>!!r).flat().toSorted())]),ue=ae(()=>e(p)?ba(e(p),z()):null),K=ae(()=>e(p)?ma(e(p),z()):null);let R=M(null),P=M(Ye({})),F=M(null),L=M(null),n=M(null),$=M(!1),Ae=ae(()=>ga(e(f),e(Z),e(O),e(ve))),Ge=null;gt(()=>{e(p)!==Ge&&(Ge=e(p),(async()=>he(!1))())});function Be(r){r!==e(O)&&d(O,r,!0)}function ie(r){$e(r,e(ve))||d(ve,r,!0)}async function he(r=!1){d(P,{},!0),d($,!0),b.set(await ua(e(p),"",r)),d($,!1),d(R,null),d(F,null)}function je(){b&&b.update(r=>(r&&e(n)&&(r.title=e(n),lt(Xe(r))),r)),d(n,null)}let at=ae(()=>{var r;return!!((r=Q().find(_=>_.id===T()))!=null&&r.items.find(_=>_.recipe_url===e(p)))});function we(r){let _=!1;for(let y of Q())if(y.id===r){for(let x of y.items)x.recipe_url===e(p)&&(x.quantity+=1,_=!0);_||(_=!0,y.items.push({recipe_url:e(p),quantity:1})),Ct(y);break}}function ye(r){for(let _ of Q())_.id===r&&(_.items=_.items.filter(y=>y.recipe_url!==e(p)),Ct(_))}function Te(r){let _=[];for(let y of e(Ae).ingredients)for(let x of y.rows)x.fragments.find(E=>E.id&&r.has(E.id))&&_.push(Xe(x));d(F,{id:ka("section"),text:"Selected ingredients",level:3,rows:_},!0)}let qe=M(Ye(Kt("keep_screen_awake"))),G=M(""),se=M(!1);St(()=>((async()=>await vt(e(qe),!1))(),async()=>{await vt(!1,!1)}));function Oe(){Je(e(G).toLowerCase()),d(G,"")}function Je(r){b.update(_=>(_&&r&&(_.tags?_.tags.some(y=>y===r)||_.tags.push(r):_.tags=[r],lt(Xe(_))),_))}let ke=ae(()=>`https://github.com/loremdipso/recipease/issues/new?title=${encodeURIComponent("Broken URL")}&body=${encodeURIComponent(`URL in question: ${e(p)}

Why it is bad: TODO`)}&labels=parsing`);var D=Jr(),xe=be(D);const Me=ae(()=>({previously_selected_recipe:e(p)}));Ra(xe,{back_path:"/my-recipes",get page_data(){return e(Me)},title_snippet:y=>{var x=gr(),E=i(x),J=i(E);{var W=S=>{var m=nr();ut(m),ta(m),Et("keypress",m,g=>{g.key==="Enter"&&(g.preventDefault(),g.stopPropagation(),je())}),Lt(m,()=>e(n),g=>d(n,g)),c(S,m)},le=S=>{var m=_r();m.__click=[cr,p];var g=i(m),V=i(g,!0);o(g),o(m),j(()=>{var u;return oe(V,(u=e(f))==null?void 0:u.title)}),c(S,m)};h(J,S=>{e(n)?S(W):S(le,!1)})}o(E);var de=l(E,2);{var ee=S=>{var m=dr(),g=be(m);g.__click=[vr,n];var V=i(g);nt(V),o(g);var u=l(g,2);u.__click=[ur,je];var I=i(u);Aa(I),o(u),j(()=>{Ne(g,"title",e(n)?"Save":"Edit"),Ne(g,"aria-label",e(n)?"Save":"Edit"),Ne(u,"title",e(n)?"Save":"Edit"),Ne(u,"aria-label",e(n)?"Save":"Edit")}),c(S,m)},fe=S=>{var m=pr();m.__click=[fr,n,f];var g=i(m);Pa(g),o(m),c(S,m)};h(de,S=>{e(n)?S(ee):S(fe,!1)})}o(x),c(y,x)},extra_buttons:y=>{var x=yr(),E=be(x);Na(E,{go_back:!0});var J=l(E,2);Oa(J,{go_back:!1});var W=l(J,2);Ta(W);var le=l(W,2);{var de=g=>{Ka(g,{onshare:async()=>{const V=new URL(window.location.href);V.search="",e(p)&&V.searchParams.set("url",e(p)),await navigator.share({title:"Here's a recipe for ya!",url:V.toString()})}})};h(le,g=>{e(f)&&g(de)})}var ee=l(le,2);ee.__click=[br,p,he];var fe=i(ee);ja(fe),o(ee);var S=l(ee,2);{var m=g=>{Ca(g,{items:u=>{var I=xr(),N=i(I);let te;var pe=l(N,2);pe.__click=[mr,f];var A=l(pe,2);A.__click=[hr];var B=l(A,2);let ne;var Se=l(B,2);jt(Se,{text:"Enable colors",get checked(){return e(Z)},onchange:U=>{d(Z,U,!0),Ht({show_colors:U})}});var ze=l(Se,2);{var He=U=>{jt(U,{text:"Keep screen on",get checked(){return e(qe)},onchange:ce=>{d(qe,ce,!0),vt(ce)}})};h(ze,U=>{navigator.wakeLock&&U(He)})}var We=l(ze,2);{var Ue=U=>{var ce=kr();ce.__click=[wr,L,p],c(U,ce)};h(We,U=>{e(f)&&U(Ue)})}o(I),j((U,ce)=>{Ne(N,"href",e(p)),te=Y(N,1,"button-like",null,te,U),Ne(B,"href",e(ke)),ne=Y(B,1,"warning button-like",null,ne,ce)},[()=>({disabled:!e(p)}),()=>({disabled:!e(p)})]),c(u,I)}})};h(S,g=>{e(f)&&g(m)})}c(y,x)},$$slots:{title_snippet:!0,extra_buttons:!0}});var Ee=l(xe,2),Re=i(Ee),Dt=i(Re);{var Gt=r=>{var _=Er();c(r,_)},Jt=(r,_)=>{{var y=E=>{var J=Nr(),W=be(J),le=i(W);{var de=C=>{const q=ae(()=>({url:e(ue).url}));Tt(C,{url:"/my-recipes/recipe",get query_params(){return e(q)},go_back:!0,text:"Previous recipe",icon_prefix:Ie=>{Sa(Ie)},$$slots:{icon_prefix:!0}})};h(le,C=>{e(ue)&&C(de)})}var ee=l(le,2);{var fe=C=>{var q=Rr(),Ke=i(q);const Ie=ae(()=>({url:e(K).url}));Tt(Ke,{url:"/my-recipes/recipe",get query_params(){return e(Ie)},go_back:!0,text:"Next recipe",icon_postfix:_e=>{lr(_e)},$$slots:{icon_postfix:!0}}),o(q),c(C,q)};h(ee,C=>{e(K)&&C(fe)})}o(W);var S=l(W,2),m=i(S),g=i(m);{var V=C=>{var q=tt(),Ke=be(q);{var Ie=_e=>{var ge=Ir();ge.__click=[Sr,ye,T];var it=i(ge);nt(it),Qe(),o(ge),c(_e,ge)},Ve=_e=>{var ge=Fr();ge.__click=[Lr,we,T];var it=i(ge);et(it),Qe(),o(ge),c(_e,ge)};h(Ke,_e=>{e(at)?_e(Ie):_e(Ve,!1)})}c(C,q)};h(g,C=>{T()!==null&&C(V)})}o(m);var u=l(m,2),I=i(u),N=i(I),te=i(N);let pe;te.__click=[Cr,ie];var A=l(te,2);let B;A.__click=[Pr,ie];var ne=l(A,2);let Se;ne.__click=[Ar,ie],o(N),o(I);var ze=l(I,2),He=i(ze);let We;He.__click=[jr,Be];var Ue=l(He,2);let U;Ue.__click=[Tr,Be];var ce=l(Ue,2);let wt;ce.__click=[Or,Be],o(ze),o(u);var rt=l(u,2);rt.__click=[Kr,se];var Zt=i(rt);et(Zt),Qe(),o(rt),o(S);var kt=l(S,2),ot=i(kt);Le(ot,21,()=>e(Ae).ingredients,Fe,(C,q)=>{X(C,()=>e(q),()=>!1)}),o(ot);var xt=l(ot,2),yt=i(xt);Le(yt,17,()=>e(Ae).instructions,Fe,(C,q)=>{X(C,()=>e(q),()=>!1)});var $t=l(yt,2);Le($t,17,()=>e(Ae).notes,Fe,(C,q)=>{X(C,()=>e(q),()=>!1)}),o(xt),o(kt),j((C,q,Ke,Ie,Ve,_e)=>{pe=Y(te,1,"choice-button svelte-wd4g5o",null,pe,C),B=Y(A,1,"choice-button svelte-wd4g5o",null,B,q),Se=Y(ne,1,"choice-button svelte-wd4g5o",null,Se,Ke),We=Y(He,1,"choice-button svelte-wd4g5o",null,We,Ie),U=Y(Ue,1,"choice-button svelte-wd4g5o",null,U,Ve),wt=Y(ce,1,"choice-button svelte-wd4g5o",null,wt,_e)},[()=>({selected:$e(e(ve),.5)}),()=>({selected:$e(e(ve),1)}),()=>({selected:$e(e(ve),2)}),()=>({selected:e(O)==Ce.IMPERIAL}),()=>({selected:e(O)==Ce.ORIGINAL}),()=>({selected:e(O)==Ce.METRIC})]),c(E,J)},x=E=>{var J=Br();c(E,J)};h(r,E=>{e(f)?E(y):E(x,!1)},_)}};h(Dt,r=>{e($)?r(Gt):r(Jt,!1)})}o(Re);var mt=l(Re,2);{var Wt=r=>{La(r,{text:"Are you sure?",accept:async()=>{e(L)&&(await fa(e(L)),d(L,null),Mt("/my-recipes",{page_data:{is_going_back:!0}}))},cancel:()=>{d(L,null)}})};h(mt,r=>{e(L)&&r(Wt)})}var Vt=l(mt,2);{var Yt=r=>{const _=ae(()=>{var y;return(y=e(F))==null?void 0:y.id});ir(r,{content:me,get id(){return e(_)}})};h(Vt,r=>{e(F)&&r(Yt)})}o(Ee);var ht=l(Ee,2);Ia(ht,{});var Qt=l(ht,2);{var Xt=r=>{sa(r,{click:()=>{d(se,!1)},content:y=>{var x=Gr(),E=l(i(x),2),J=l(i(E),2);Le(J,5,()=>{var u;return((u=k())==null?void 0:u.tags)||[]},Fe,(u,I)=>{var N=qr();N.__click=()=>{b.update(A=>(A!=null&&A.tags&&(A.tags=A.tags.filter(B=>B!==e(I)),lt(Xe(A))),A))};var te=i(N);nt(te);var pe=l(te);o(N),j(()=>oe(pe,` ${e(I)??""}`)),c(u,N)}),o(J),o(E);var W=l(E,2),le=l(i(W),2);Le(le,21,()=>e(H),Fe,(u,I)=>{var N=tt(),te=be(N);{var pe=A=>{var B=zr();B.__click=[Mr,Je,I];var ne=i(B);et(ne);var Se=l(ne);o(B),j(()=>oe(Se,` ${e(I)??""}`)),c(A,B)};h(te,A=>{var B;(!((B=k())!=null&&B.tags)||!k().tags.some(ne=>ne==e(I)))&&A(pe)})}c(u,N)}),o(le),o(W);var de=l(W,2),ee=i(de),fe=l(i(ee));ut(fe),o(ee),o(de);var S=l(de,2),m=i(S);m.__click=[Hr,se];var g=l(m,2);{var V=u=>{var I=Dr();I.__click=[Ur,Oe];var N=i(I);et(N),Qe(),o(I),c(u,I)};h(g,u=>{e(G)&&u(V)})}o(S),o(x),Et("keypress",fe,u=>{u.key==="Enter"&&(u.stopPropagation(),u.preventDefault(),Oe())}),Lt(fe,()=>e(G),u=>d(G,u)),c(y,x)},$$slots:{content:!0}})};h(Qt,r=>{e(se)&&r(Xt)})}c(a,D),bt(),w()}Nt(["click"]);export{So as component};
