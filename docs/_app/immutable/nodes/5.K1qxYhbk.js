import{d as Nt,t as _,c as We,a as n,s as ne,n as ea,i as ta,e as wt}from"../chunks/DwgEjbxA.js";import{q as kt,p as _t,d as vt,c as i,s,r as o,i as e,f as he,t as z,a as ut,A as M,B as u,at as xt,z as Pe,aS as aa,C as ee,ap as yt,G as Ge}from"../chunks/CaVnAIw_.js";import{s as ra}from"../chunks/Cxt0cju3.js";import{i as b}from"../chunks/C_eFljRt.js";import{e as Ee,i as Ie}from"../chunks/BKNwm1Mp.js";import{r as lt,b as oa,a as ia,s as Ae}from"../chunks/DEpH4IwR.js";import{t as sa,s as te,c as St}from"../chunks/DPUI1Xrs.js";import{b as Rt,O as la}from"../chunks/CBHtq2v6.js";import{s as na,a as Et}from"../chunks/BBhsiMei.js";import{a as Ot,b as ca,C as _a,s as va}from"../chunks/_TEUyO84.js";import{b as nt}from"../chunks/B-TBSvj1.js";import{p as ua}from"../chunks/SH_-Z4zf.js";import{M as It}from"../chunks/C_emGiiq.js";import{F as le,K as qt,U as Le,g as Lt,b as da,n as ct,J as fa,M as ga,x as pa,h as Kt,d as ba,u as at,N as ma,B as ha,P as wa,Q as ka,R as Je,S as xa,T as ya,l as Sa,V as Ct}from"../chunks/BRz5OOaA.js";import{t as Ft,a as Pt}from"../chunks/By2nwULu.js";import{S as At}from"../chunks/BohLq3Gq.js";import{T as Ra,L as Tt,A as Ea}from"../chunks/DpR3YKCo.js";import{A as Ia}from"../chunks/Cmzp5bhs.js";import{P as La}from"../chunks/lxbPnOeZ.js";import{a as Ca}from"../chunks/B5Z8z8F4.js";import{H as Fa}from"../chunks/C3XJy-kT.js";import{P as Pa}from"../chunks/DYaxqxp7.js";import{S as Aa}from"../chunks/DugQyq8C.js";import{R as Ta}from"../chunks/DLm_gzPk.js";import{T as rt}from"../chunks/CrVo5Hep.js";import{H as ja}from"../chunks/D9Rl7JZ1.js";import{C as Ba}from"../chunks/ChW4vB16.js";import{S as Na}from"../chunks/poKMpjBg.js";import{R as Oa}from"../chunks/clNqAUeT.js";import{P as Ve}from"../chunks/CEr657pl.js";import"../chunks/CvB9P_jb.js";function ot(a,t={},l,y){for(var w in l){var T=l[w];t[w]!==T&&(l[w]==null?a.style.removeProperty(w):a.style.setProperty(w,T,y))}}function qa(a,t,l,y){var w=a.__style;if(kt||w!==t){var T=sa(t,y);(!kt||T!==a.getAttribute("style"))&&(T==null?a.removeAttribute("style"):a.style.cssText=T),a.__style=t}else y&&(Array.isArray(y)?(ot(a,l==null?void 0:l[0],y[0]),ot(a,l==null?void 0:l[1],y[1],"important")):ot(a,l,y));return y}var Ka=_("<h2> </h2>"),Ma=_("<h3> </h3>"),za=_("<h4> </h4>"),Ha=(a,t)=>t.onCloseSection(),Ua=_('<button class="shrink no-print p1" title="Close" aria-label="Close"><!></button>'),Da=(a,t)=>t.onFocusSection(t.section),Ga=_('<button class="shrink no-print p1" title="Focus" aria-label="Focus"><!></button>'),Ja=(a,t,l)=>{t()[e(l).id]=a.target.checked},Va=_('<span class="svelte-12fzojj"> </span>'),Wa=_('<b class="svelte-12fzojj"> </b>'),Qa=_('<b class="svelte-12fzojj"> </b>'),Ya=(a,t,l)=>{e(t).id!=null&&e(t).type===le.Ingredient&&(a.preventDefault(),l.onHighlightKeyword(e(t).id))},Xa=_("<button> </button>"),Za=(a,t,l)=>{let y=new Set;for(let w of e(t).fragments)w.id!=null&&w.type===le.Ingredient&&y.add(w.id);l.onFocusIngredients(y)},$a=_('<button class="bottom-right-floater svelte-12fzojj" title="Focus ingredients" aria-label="Focus ingredients"><!></button>'),er=_('<label><input class="shrink" type="checkbox"> <div class="fragments grow ph0_5 lh2 svelte-12fzojj"></div> <!></label>'),tr=_('<div><header class="flex-row vertically-centered gap1"><!> <!></header> <div class="list"></div></div>');function ar(a,t){_t(t,!0);let l=ua(t,"checked_items",7);function y(k){switch(k.type){case le.Ingredient:return"ingredient";case le.Temperature:return"temperature";case le.Percentage:return"percentage";case le.Amount:return"amount";default:return""}}function w(k){return!!(t.selectedKeyword&&k.fragments.find(S=>S.id==t.selectedKeyword))}function T(k){if(!t.isFocused&&t.section.text!=="Ingredients"){let S=0;for(let B of k.fragments)B.type===le.Ingredient&&(S+=1);if(S>=3)return!0}return!1}let ce;vt(()=>{ce&&t.isFocused&&t.section&&ce.scrollIntoView()});var j=tr(),d=i(j),_e=i(d);{var J=k=>{var S=Ka(),B=i(S,!0);o(S),z(()=>ne(B,t.section.text)),n(k,S)},ae=(k,S)=>{{var B=C=>{var F=Ma(),m=i(F,!0);o(F),z(()=>ne(m,t.section.text)),n(C,F)},ue=(C,F)=>{{var m=N=>{var g=za(),h=i(g,!0);o(g),z(()=>ne(h,t.section.text)),n(N,g)};b(C,N=>{t.section.level===4&&N(m)},F)}};b(k,C=>{t.section.level===3?C(B):C(ue,!1)},S)}};b(_e,k=>{t.section.level===2?k(J):k(ae,!1)})}var D=s(_e,2);{var ve=k=>{var S=We(),B=he(S);{var ue=F=>{var m=Ua();m.__click=[Ha,t];var N=i(m);_a(N),o(m),n(F,m)},C=F=>{var m=Ga();m.__click=[Da,t];var N=i(m);It(N),o(m),n(F,m)};b(B,F=>{t.isFocused?F(ue):F(C,!1)})}n(k,S)};b(D,k=>{t.section.rows.length&&k(ve)})}o(d);var H=s(d,2);Ee(H,21,()=>t.section.rows,Ie,(k,S)=>{var B=er();let ue;var C=i(B);lt(C),C.__change=[Ja,l,S];var F=s(C,2);Ee(F,21,()=>e(S).fragments,Ie,(g,h)=>{var V=We(),Me=he(V);{var Te=de=>{var we=Va(),fe=i(we,!0);o(we),z(()=>ne(fe,e(h).text)),n(de,we)},je=(de,we)=>{{var fe=ke=>{var xe=Wa(),Ce=i(xe,!0);o(xe),z(()=>ne(Ce,e(h).text)),n(ke,xe)},Qe=(ke,xe)=>{{var Ce=W=>{var G=Qa(),ye=i(G,!0);o(G),z(()=>ne(ye,e(h).text)),n(W,G)},Be=W=>{var G=Xa();let ye;G.__click=[Ya,h,t];var ze=i(G,!0);o(G),z((Ye,He)=>{ye=te(G,1,Ye,"svelte-12fzojj",ye,He),ne(ze,e(h).text)},[()=>St(y(e(h))),()=>({failed:e(h).failed,converted:e(h).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(h).id})]),n(W,G)};b(ke,W=>{e(h).type===le.Italic?W(Ce):W(Be,!1)},xe)}};b(de,ke=>{e(h).type===le.Bold?ke(fe):ke(Qe,!1)},we)}};b(Me,de=>{e(h).type===le.Plain?de(Te):de(je,!1)})}n(g,V)}),o(F);var m=s(F,2);{var N=g=>{var h=$a();h.__click=[Za,S,t];var V=i(h);It(V),o(h),n(g,h)};b(m,g=>{T(e(S))&&g(N)})}o(B),Ot(B,(g,h)=>{var V;return(V=ca)==null?void 0:V(g,h)},()=>({enabled:t.isFocused,key:w(e(S))})),z(g=>{ue=te(B,1,"relative selectable flex-row ph0",null,ue,g),oa(C,l()[e(S).id])},[()=>({selected:w(e(S))})]),n(k,B)}),o(H),nt(H,k=>ce=k,()=>ce),o(j),z(()=>te(j,1,St(t.section.rows.length&&!t.isFocused?"card has-list pt0":""))),n(a,j),ut()}Nt(["click","change"]);var rr=_('<div class="spacer svelte-1rjut5w"></div> <div class="focus-pane svelte-1rjut5w"><div class="focus-pane-scroller svelte-1rjut5w"><div class="focus-pane-content"><!></div></div></div>',1);function or(a,t){_t(t,!0);const l=500;let y=M(void 0),w=M(void 0),T=M("0");vt(()=>{if(t.id!=null&&e(y)&&e(w)){let D=e(w).clientHeight+20;u(T,`min(30vh, ${D}px)`)}});var ce=rr(),j=s(he(ce),2);let d;var _e=i(j),J=i(_e),ae=i(J);ia(ae,()=>t.content),o(J),nt(J,D=>u(w,D),()=>e(w)),o(_e),Ot(_e,(D,ve)=>{var H;return(H=va)==null?void 0:H(D)},()=>({key:t.id})),o(j),nt(j,D=>u(y,D),()=>e(y)),z(()=>d=qa(j,"",d,{height:e(T)})),Ft(1,j,()=>Pt,()=>({y:"100%",duration:l})),Ft(2,j,()=>Pt,()=>({y:"100%",duration:l})),n(a,ce),ut()}const jt={keep_screen_awake:!0,show_colors:!0};function Mt(){try{let a=localStorage.getItem(qt.PREFERENCES);if(a)return{...jt,...JSON.parse(a)}}catch(a){console.error(a)}return{...jt}}function zt(a){localStorage.setItem(qt.PREFERENCES,JSON.stringify({...Mt(),...a}))}function Bt(a){return Mt()[a]}let Ke=null;const it=async()=>{document.visibilityState==="visible"&&setTimeout(async()=>await Ht(),1e3)},st=async(a,t=!0)=>{if(navigator.wakeLock){if(a)await Ht(),document.removeEventListener("visibilitychange",it),document.addEventListener("visibilitychange",it);else{console.info("Disabling wake lock");let l=Ke;Ke=null,l&&l.release(),document.removeEventListener("visibilitychange",it)}t&&zt({keep_screen_awake:a})}},Ht=async()=>{try{if(Ke)try{console.info("Releasing old wake lock"),await Ke.release()}catch{}Ke=await navigator.wakeLock.request("screen"),console.info("Wake Lock is active")}catch(a){console.error(a)}};var ir=ea(`<svg fill="white" height="16px" width="16px" style="min-width: 16px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.005 512.005" xml:space="preserve"><g><g><path d="M388.418,240.923L153.751,6.256c-8.341-8.341-21.824-8.341-30.165,0s-8.341,21.824,0,30.165L343.17,256.005
			L123.586,475.589c-8.341,8.341-8.341,21.824,0,30.165c4.16,4.16,9.621,6.251,15.083,6.251c5.461,0,10.923-2.091,15.083-6.251
			l234.667-234.667C396.759,262.747,396.759,249.264,388.418,240.923z"></path></g></g></svg>`);function sr(a){var t=ir();n(a,t)}var lr=_("<input>"),nr=(a,t)=>Kt("/my-recipes",{page_data:{is_going_back:!0,previously_selected_recipe:e(t)}}),cr=_('<button class="shrink white-text flex-row vertically-centered p0 gap0_5" title="Go back" aria-label="Go back"><h1> </h1></button>'),_r=(a,t)=>{u(t,"")},vr=(a,t)=>{t()},ur=_('<button class="shrink pl1"><!></button> <button class="shrink pl1"><!></button>',1),dr=(a,t,l)=>{var y;u(t,((y=e(l))==null?void 0:y.title)||"",!0)},fr=_('<button class="shrink pl1" title="Edit" aria-label="Edit"><!></button>'),gr=_('<div class="flex-row vertically-centered grow svelte-wd4g5o"><div class="grow flex-col"><!></div> <!></div>'),pr=async(a,t,l)=>{e(t)?(ct("Reloading..."),await l(!0)):ct("No url!","error")},br=async(a,t)=>{if(e(t)){let l=ma(e(t));await ha(l),ct("Copied markdown to clipboard :)")}},mr=async()=>{window.print()},hr=async(a,t,l)=>{u(t,e(l),!0)},wr=_('<button class="warning">Delete recipe</button>'),kr=_('<div class="flex-col svelte-wd4g5o"><a target="_blank">Open the original</a> <button>Get markdown</button> <button>Print</button> <a target="_blank">Report bug</a> <!> <!> <!></div>'),xr=_('<!> <!> <!> <!> <button title="Reload this recipe" aria-label="Reload this recipe" class="svelte-wd4g5o"><!></button> <!>',1),yr=_('<div class="card mt1"><h2>Loading...</h2></div>'),Sr=_('<div class="mla"><!></div>'),Rr=(a,t,l)=>{t(l())},Er=_('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Remove from current list</button>'),Ir=(a,t,l)=>{t(l())},Lr=_('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Add to current list</button>'),Cr=(a,t)=>t(.5),Fr=(a,t)=>t(1),Pr=(a,t)=>t(2),Ar=(a,t)=>t(Le.IMPERIAL),Tr=(a,t)=>t(Le.ORIGINAL),jr=(a,t)=>t(Le.METRIC),Br=(a,t)=>{u(t,!0)},Nr=_('<div class="flex-row gap1 space-between no-print"><!> <!></div> <div class="flex-col gap1 mb1 mt1 no-print"><div class="flex-row vertically-centered wrap rgap0_5"><!></div> <div class="flex-row gap1 mb1 mt1 wrap"><div class="flex-row gap1"><div class="flex-row"><button>0.5x</button> <button>1x</button> <button>2x</button></div></div> <div class="flex-row grow-children"><button>Imperial</button> <button>Original</button> <button>Metric</button></div></div> <button class="mla rounded blue p0_5 vertically-centered gap0_5"><!> Add tags</button></div> <div class="recipe-columns flex-col gap1 svelte-wd4g5o"><div class="flex-col gap1 svelte-wd4g5o"></div> <div class="flex-col gap1 svelte-wd4g5o"><!> <!></div></div>',1),Or=_('<div class="card mt1"><h2>ERROR: No recipe :/</h2></div>'),qr=_('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),Kr=(a,t,l)=>{t(e(l))},Mr=_('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),zr=(a,t)=>{u(t,!1)},Hr=(a,t)=>{t()},Ur=_('<button class="flex-row rounded green gap0_5 vertically-centered" title="Save" aria-label="Save"><!> Add new tag</button>'),Dr=_('<div class="flex-col gap1 svelte-wd4g5o"><h2>Tags</h2> <div><h3>Current tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div><h3>Other tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div class="flex-row vertically-centered"><label class="flex-row wrap gap0_5">Create new tag: <input class="grow downcase"></label></div> <div class="flex-row flex-end gap1"><button class="mla">Close</button> <!></div></div>'),Gr=_('<!> <main class="svelte-wd4g5o"><div class="flex-col gap2 svelte-wd4g5o"><!></div> <!> <!></main> <!> <!>',1);function So(a,t){_t(t,!0);const[l,y]=na(),w=()=>Et(ve,"$data",l),T=()=>Et(Sa,"$last_list_id",l),ce=r=>{j(r,()=>e(m),()=>!0)},j=(r,c=yt,E=yt)=>{ar(r,{get section(){return c()},get isFocused(){return E()},get selectedKeyword(){return e(C)},get checked_items(){return e(F)},onHighlightKeyword:x=>{x===e(C)?u(C,null):(u(C,x,!0),x&&Ce(new Set([x])))},onFocusIngredients:Ce,onFocusSection:x=>{var R;c().id===((R=e(m))==null?void 0:R.id)?u(m,null):u(m,c(),!0)},onCloseSection:()=>{u(m,null)}})};let d=M(null);xt(()=>{_e()}),Ca(()=>{_e()});function _e(){let r=ga();r!==e(d)&&u(d,r,!0)}let J=M(Pe(Le.ORIGINAL)),ae=M(1),D=M(Pe(Bt("show_colors")));const ve=aa(null),H=ee(()=>pa(w(),e(D))),k=Pe(Lt()),S=ee(()=>[...new Set(k.map(r=>r.tags).filter(r=>!!r).flat().toSorted())]),B=ee(()=>e(d)?xa(e(d),k):null),ue=ee(()=>e(d)?ya(e(d),k):null);let C=M(null),F=M(Pe({})),m=M(null),N=M(null),g=M(null),h=M(!1),V=ee(()=>ka(e(H),e(D),e(J),e(ae))),Me=null;vt(()=>{e(d)!==Me&&(Me=e(d),(async()=>de(!1))())});function Te(r){r!==e(J)&&u(J,r,!0)}function je(r){Je(r,e(ae))||u(ae,r,!0)}async function de(r=!1){u(F,{},!0),u(h,!0),ve.set(await fa(e(d),"",r)),u(h,!1),u(C,null),u(m,null)}function we(){ve&&ve.update(r=>(r&&e(g)&&(r.title=e(g),at(r)),r)),u(g,null)}let fe=Pe(da()),Qe=ee(()=>{var r;return!!((r=fe.find(c=>c.id===T()))!=null&&r.items.find(c=>c.recipe_url===e(d)))});function ke(r){let c=!1;for(let E of fe)if(E.id===r){for(let x of E.items)x.recipe_url===e(d)&&(x.quantity+=1,c=!0);c||(c=!0,E.items.push({recipe_url:e(d),quantity:1}))}c&&Ct(fe)}function xe(r){for(let c of fe)c.id===r&&(c.items=c.items.filter(E=>E.recipe_url!==e(d)));Ct(fe)}function Ce(r){let c=[];for(let E of e(V).ingredients)for(let x of E.rows)x.fragments.find(R=>R.id&&r.has(R.id))&&c.push(ra(x));u(m,{id:wa("section"),text:"Selected ingredients",level:3,rows:c},!0)}let Be=M(Pe(Bt("keep_screen_awake"))),W=M(""),G=M(!1);xt(()=>((async()=>await st(e(Be),!1))(),async()=>{await st(!1,!1)}));function ye(){ze(e(W).toLowerCase()),u(W,"")}function ze(r){ve.update(c=>(c&&r&&(c.tags?c.tags.some(E=>E===r)||c.tags.push(r):c.tags=[r],at(c)),c))}let Ye=ee(()=>`https://github.com/loremdipso/recipease/issues/new?title=${encodeURIComponent("Broken URL")}&body=${encodeURIComponent(`URL in question: ${e(d)}

Why it is bad: TODO`)}&labels=parsing`);var He=Gr(),dt=he(He);const Ut=ee(()=>({previously_selected_recipe:e(d)}));Ra(dt,{back_path:"/my-recipes",get page_data(){return e(Ut)},title_snippet:E=>{var x=gr(),R=i(x),Q=i(R);{var Y=I=>{var p=lr();lt(p),ta(p),wt("keypress",p,f=>{f.key==="Enter"&&(f.preventDefault(),f.stopPropagation(),we())}),Rt(p,()=>e(g),f=>u(g,f)),n(I,p)},re=I=>{var p=cr();p.__click=[nr,d];var f=i(p),X=i(f,!0);o(f),o(p),z(()=>{var v;return ne(X,(v=e(H))==null?void 0:v.title)}),n(I,p)};b(Q,I=>{e(g)?I(Y):I(re,!1)})}o(R);var ge=s(R,2);{var Z=I=>{var p=ur(),f=he(p);f.__click=[_r,g];var X=i(f);rt(X),o(f);var v=s(f,2);v.__click=[vr,we];var L=i(v);Aa(L),o(v),z(()=>{Ae(f,"title",e(g)?"Save":"Edit"),Ae(f,"aria-label",e(g)?"Save":"Edit"),Ae(v,"title",e(g)?"Save":"Edit"),Ae(v,"aria-label",e(g)?"Save":"Edit")}),n(I,p)},pe=I=>{var p=fr();p.__click=[dr,g,H];var f=i(p);Pa(f),o(p),n(I,p)};b(ge,I=>{e(g)?I(Z):I(pe,!1)})}o(x),n(E,x)},extra_buttons:E=>{var x=xr(),R=he(x);Oa(R,{go_back:!0});var Q=s(R,2);Ba(Q,{go_back:!1});var Y=s(Q,2);ja(Y);var re=s(Y,2);{var ge=f=>{Na(f,{onshare:async()=>{const X=new URL(window.location.href);X.search="",e(d)&&X.searchParams.set("url",e(d)),await navigator.share({title:"Here's a recipe for ya!",url:X.toString()})}})};b(re,f=>{e(H)&&f(ge)})}var Z=s(re,2);Z.__click=[pr,d,de];var pe=i(Z);Ta(pe),o(Z);var I=s(Z,2);{var p=f=>{Fa(f,{items:v=>{var L=kr(),O=i(L);let $;var be=s(O,2);be.__click=[br,H];var A=s(be,2);A.__click=[mr];var q=s(A,2);let oe;var Se=s(q,2);At(Se,{text:"Enable colors",get checked(){return e(D)},onchange:U=>{u(D,U,!0),zt({show_colors:U})}});var Ne=s(Se,2);{var Oe=U=>{At(U,{text:"Keep screen on",get checked(){return e(Be)},onchange:ie=>{u(Be,ie,!0),st(ie)}})};b(Ne,U=>{navigator.wakeLock&&U(Oe)})}var Ue=s(Ne,2);{var qe=U=>{var ie=wr();ie.__click=[hr,N,d],n(U,ie)};b(Ue,U=>{e(H)&&U(qe)})}o(L),z((U,ie)=>{Ae(O,"href",e(d)),$=te(O,1,"button-like",null,$,U),Ae(q,"href",e(Ye)),oe=te(q,1,"warning button-like",null,oe,ie)},[()=>({disabled:!e(d)}),()=>({disabled:!e(d)})]),n(v,L)}})};b(I,f=>{e(H)&&f(p)})}n(E,x)},$$slots:{title_snippet:!0,extra_buttons:!0}});var Xe=s(dt,2),Ze=i(Xe),Dt=i(Ze);{var Gt=r=>{var c=yr();n(r,c)},Jt=(r,c)=>{{var E=R=>{var Q=Nr(),Y=he(Q),re=i(Y);{var ge=P=>{const K=ee(()=>({url:e(B).url}));Tt(P,{url:"/my-recipes/recipe",get query_params(){return e(K)},go_back:!0,text:"Previous recipe",icon_prefix:Re=>{Ea(Re)},$$slots:{icon_prefix:!0}})};b(re,P=>{e(B)&&P(ge)})}var Z=s(re,2);{var pe=P=>{var K=Sr(),Fe=i(K);const Re=ee(()=>({url:e(ue).url}));Tt(Fe,{url:"/my-recipes/recipe",get query_params(){return e(Re)},go_back:!0,text:"Next recipe",icon_postfix:se=>{sr(se)},$$slots:{icon_postfix:!0}}),o(K),n(P,K)};b(Z,P=>{e(ue)&&P(pe)})}o(Y);var I=s(Y,2),p=i(I),f=i(p);{var X=P=>{var K=We(),Fe=he(K);{var Re=se=>{var me=Er();me.__click=[Rr,xe,T];var tt=i(me);rt(tt),Ge(),o(me),n(se,me)},De=se=>{var me=Lr();me.__click=[Ir,ke,T];var tt=i(me);Ve(tt),Ge(),o(me),n(se,me)};b(Fe,se=>{e(Qe)?se(Re):se(De,!1)})}n(P,K)};b(f,P=>{T()!==null&&P(X)})}o(p);var v=s(p,2),L=i(v),O=i(L),$=i(O);let be;$.__click=[Cr,je];var A=s($,2);let q;A.__click=[Fr,je];var oe=s(A,2);let Se;oe.__click=[Pr,je],o(O),o(L);var Ne=s(L,2),Oe=i(Ne);let Ue;Oe.__click=[Ar,Te];var qe=s(Oe,2);let U;qe.__click=[Tr,Te];var ie=s(qe,2);let pt;ie.__click=[jr,Te],o(Ne),o(v);var $e=s(v,2);$e.__click=[Br,G];var Zt=i($e);Ve(Zt),Ge(),o($e),o(I);var bt=s(I,2),et=i(bt);Ee(et,21,()=>e(V).ingredients,Ie,(P,K)=>{j(P,()=>e(K),()=>!1)}),o(et);var mt=s(et,2),ht=i(mt);Ee(ht,17,()=>e(V).instructions,Ie,(P,K)=>{j(P,()=>e(K),()=>!1)});var $t=s(ht,2);Ee($t,17,()=>e(V).notes,Ie,(P,K)=>{j(P,()=>e(K),()=>!1)}),o(mt),o(bt),z((P,K,Fe,Re,De,se)=>{be=te($,1,"choice-button svelte-wd4g5o",null,be,P),q=te(A,1,"choice-button svelte-wd4g5o",null,q,K),Se=te(oe,1,"choice-button svelte-wd4g5o",null,Se,Fe),Ue=te(Oe,1,"choice-button svelte-wd4g5o",null,Ue,Re),U=te(qe,1,"choice-button svelte-wd4g5o",null,U,De),pt=te(ie,1,"choice-button svelte-wd4g5o",null,pt,se)},[()=>({selected:Je(e(ae),.5)}),()=>({selected:Je(e(ae),1)}),()=>({selected:Je(e(ae),2)}),()=>({selected:e(J)==Le.IMPERIAL}),()=>({selected:e(J)==Le.ORIGINAL}),()=>({selected:e(J)==Le.METRIC})]),n(R,Q)},x=R=>{var Q=Or();n(R,Q)};b(r,R=>{e(H)?R(E):R(x,!1)},c)}};b(Dt,r=>{e(h)?r(Gt):r(Jt,!1)})}o(Ze);var ft=s(Ze,2);{var Vt=r=>{La(r,{text:"Are you sure?",accept:()=>{e(N)&&(ba(Lt(),e(N)),u(N,null),Kt("/my-recipes",{page_data:{is_going_back:!0}}))},cancel:()=>{u(N,null)}})};b(ft,r=>{e(N)&&r(Vt)})}var Wt=s(ft,2);{var Qt=r=>{const c=ee(()=>{var E;return(E=e(m))==null?void 0:E.id});or(r,{content:ce,get id(){return e(c)}})};b(Wt,r=>{e(m)&&r(Qt)})}o(Xe);var gt=s(Xe,2);Ia(gt,{});var Yt=s(gt,2);{var Xt=r=>{la(r,{click:()=>{u(G,!1)},content:E=>{var x=Dr(),R=s(i(x),2),Q=s(i(R),2);Ee(Q,5,()=>{var v;return((v=w())==null?void 0:v.tags)||[]},Ie,(v,L)=>{var O=qr();O.__click=()=>{ve.update(A=>(A!=null&&A.tags&&(A.tags=A.tags.filter(q=>q!==e(L)),at(A)),A))};var $=i(O);rt($);var be=s($);o(O),z(()=>ne(be,` ${e(L)??""}`)),n(v,O)}),o(Q),o(R);var Y=s(R,2),re=s(i(Y),2);Ee(re,21,()=>e(S),Ie,(v,L)=>{var O=We(),$=he(O);{var be=A=>{var q=Mr();q.__click=[Kr,ze,L];var oe=i(q);Ve(oe);var Se=s(oe);o(q),z(()=>ne(Se,` ${e(L)??""}`)),n(A,q)};b($,A=>{var q;(!((q=w())!=null&&q.tags)||!w().tags.some(oe=>oe==e(L)))&&A(be)})}n(v,O)}),o(re),o(Y);var ge=s(Y,2),Z=i(ge),pe=s(i(Z));lt(pe),o(Z),o(ge);var I=s(ge,2),p=i(I);p.__click=[zr,G];var f=s(p,2);{var X=v=>{var L=Ur();L.__click=[Hr,ye];var O=i(L);Ve(O),Ge(),o(L),n(v,L)};b(f,v=>{e(W)&&v(X)})}o(I),o(x),wt("keypress",pe,v=>{v.key==="Enter"&&(v.stopPropagation(),v.preventDefault(),ye())}),Rt(pe,()=>e(W),v=>u(W,v)),n(E,x)},$$slots:{content:!0}})};b(Yt,r=>{e(G)&&r(Xt)})}n(a,He),ut(),y()}Nt(["click"]);export{So as component};
