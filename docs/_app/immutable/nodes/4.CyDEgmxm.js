import{d as bt,t as m,a as d,s as K,b as O}from"../chunks/SB0OVNle.js";import{p as xt,z as D,A as ht,f as Q,a as kt,s as u,c as l,t as U,i as t,B as b,C as y,r as s}from"../chunks/DSkh8qEa.js";import{s as w}from"../chunks/CcQv_5Hk.js";import{i as $}from"../chunks/CvGVVl0L.js";import{e as V,i as yt}from"../chunks/C4ChMz49.js";import{s as $t}from"../chunks/B143Bn_A.js";import{s as wt}from"../chunks/XkMwF1L_.js";import{t as At,s as Pt}from"../chunks/Du2Mpddd.js";import{b as Dt}from"../chunks/CdUqOFUv.js";import{s as St,a as Tt}from"../chunks/CHrfQ6KJ.js";import{p as W}from"../chunks/BqFh0XA0.js";import{d as Bt,u as S}from"../chunks/yoqPm747.js";import{g as Rt,a as Ct}from"../chunks/mITXVc5a.js";import{R as Nt,S as Ft,a as Lt}from"../chunks/DnqlUQfQ.js";import{T as zt}from"../chunks/BaRewT1R.js";import{A as Mt}from"../chunks/BaWdAwxW.js";import{C as jt}from"../chunks/DK5Jm4GR.js";import{S as qt}from"../chunks/Dki5Jd2p.js";import{P as Et,A as Gt}from"../chunks/Bxsal1vD.js";import{T as Ht}from"../chunks/BQ79WqDB.js";import{P as It}from"../chunks/DZmU10Ic.js";import{a as Jt}from"../chunks/Cw4xG6mS.js";var Kt=m("<!> <!>",1),Ot=(n,v)=>{n.stopPropagation(),n.preventDefault(),t(v).starred=!1,S(w(t(v)))},Qt=m("<button><!></button>"),Ut=(n,v)=>{n.stopPropagation(),n.preventDefault(),t(v).starred=!0,S(w(t(v)))},Vt=m("<button><!></button>"),Wt=(n,v,h)=>{n.stopPropagation(),n.preventDefault(),b(v,t(h).url,!0)},Xt=(n,v,h)=>{n.stopPropagation(),n.preventDefault(),b(v,w(t(h)),!0)},Yt=m('<div class="rounded"> </div>'),Zt=m('<div class="flex-row flex-end green-text wrap gap2"></div>'),ta=m('<div><a class="flex-col grow"><div class="flex-row vertically-centered gap0_5"><div class="shrink"><!></div> <span class="grow"> </span> <button class="shrink" title="Delete" aria-label="Delete"><!></button> <button class="shrink" title="Add tags" aria-label="Add tags"><!></button></div> <!></a></div>'),aa=m('<div class="recipe-row"><!></div>'),ra=m('<!> <main class="flex-col gap1"><div class="full-width flex-col"><div class="card has-list gap1 flex-col pt0"><div class="rounded-bottom black p0_5"><!></div> <div class="list"></div></div></div></main> <!> <!> <!>',1);function Aa(n,v){xt(v,!0);const[h,X]=St(),Y=()=>Tt(Ct,"$all_recipes",h);let T=D(ht([])),x=D(null),o=D(null);const Z=y(()=>{var a;return(a=W.state)==null?void 0:a.previously_selected_recipe}),tt=y(()=>{var a;return!!((a=W.state)!=null&&a.is_going_back)});let z=D(!1);Jt(a=>{b(z,a.type==="popstate")});const M=y(()=>t(tt)||t(z)),at=y(()=>t(M)?0:400);let A;const rt={capture:()=>A.capture(),restore:a=>{A.restore(a)}};var j=ra(),q=Q(j);Ht(q,{title:"My Saved Recipes",back_path:"/",extra_buttons:r=>{var _=Kt(),i=Q(_);jt(i,{});var f=u(i,2);qt(f,{}),d(r,_)},$$slots:{extra_buttons:!0}});var B=u(q,2),E=l(B),G=l(E),R=l(G),et=l(R);Dt(Nt(et,{get skip_initial_animation(){return t(M)},get recipes(){return t(T)},set recipes(a){b(T,a,!0)}}),a=>A=a,()=>A),s(R);var H=u(R,2);V(H,21,()=>t(T),a=>a.url,(a,r,_)=>{var i=ta();let f;var c=l(i),g=l(c),C=l(g),nt=l(C);{var _t=p=>{var e=Qt();e.__click=[Ot,r];var k=l(e);Ft(k),s(e),d(p,e)},pt=p=>{var e=Vt();e.__click=[Ut,r];var k=l(e);Lt(k),s(e),d(p,e)};$(nt,p=>{t(r).starred?p(_t):p(pt,!1)})}s(C);var N=u(C,2),vt=l(N,!0);s(N);var P=u(N,2);P.__click=[Wt,x,r];var ct=l(P);zt(ct),s(P);var F=u(P,2);F.__click=[Xt,o,r];var dt=l(F);It(dt),s(F),s(g);var ut=u(g,2);{var ft=p=>{var e=Zt();V(e,21,()=>t(r).tags,yt,(k,mt)=>{var L=Yt(),gt=l(L,!0);s(L),U(()=>K(gt,t(mt))),d(k,L)}),s(e),d(p,e)};$(ut,p=>{var e;(e=t(r).tags)!=null&&e.length&&p(ft)})}s(c),s(i),U((p,e)=>{f=wt(i,1,"flex-col",null,f,p),$t(c,"href",e),K(vt,t(r).title||"<missing title>")},[()=>({selected:t(r).url&&t(r).url===t(Z)}),()=>Rt("/my-recipes/recipe",{url:t(r).url})]),At(3,i,()=>Pt,()=>({duration:t(at)})),d(a,i)},a=>{var r=aa(),_=l(r);{var i=c=>{var g=O("No recipes match current filters");d(c,g)},f=c=>{var g=O("No recipes yet");d(c,g)};$(_,c=>{Y().length?c(i):c(f,!1)})}s(r),d(a,r)}),s(H),s(G),s(E),s(B);var I=u(B,2);Mt(I,{});var J=u(I,2);{var st=a=>{Et(a,{text:"Are you sure?",accept:()=>{t(x)&&(Bt(t(x)),b(x,null))},cancel:()=>{b(x,null)}})};$(J,a=>{t(x)&&a(st)})}var ot=u(J,2);{var it=a=>{const r=y(()=>t(o).tags||[]);Gt(a,{get tags(){return t(r)},onclose:()=>{b(o,null)},onaddtag:_=>{t(o)&&_&&(t(o).tags?t(o).tags.some(i=>i===_)||(t(o).tags.push(_),t(o).tags.sort()):t(o).tags=[_],S(w(t(o))))},ondeletetag:_=>{var i;(i=t(o))!=null&&i.tags&&(t(o).tags=t(o).tags.filter(f=>f!==_),S(w(t(o))))}})};$(ot,a=>{t(o)&&a(it)})}d(n,j);var lt=kt({snapshot:rt});return X(),lt}bt(["click"]);export{Aa as component};
