import{d as Tt,t as u,c as nt,a as n,s as $,n as Xt,i as Zt,e as $t}from"../chunks/aHhSpOdM.js";import{h as kt,p as vt,D as ut,c as s,s as l,r as i,o as e,f as be,t as K,a as dt,l as B,q as p,aA as wt,m as Qe,at as ea,u as V,ap as xt,z as rt}from"../chunks/BYTqjnmQ.js";import{s as Ge}from"../chunks/Ci9CMcXt.js";import{i as w}from"../chunks/DZ2x0wit.js";import{e as Ae,i as Pe}from"../chunks/CLXJqfNh.js";import{r as qt,b as ta,a as aa,s as Fe}from"../chunks/DbSBZFay.js";import{t as ra,s as U,c as it}from"../chunks/BFw_Zomu.js";import{b as ia}from"../chunks/Yh1PSW4n.js";import{s as oa,a as Xe}from"../chunks/BwSmt7X6.js";import{a as Kt,b as sa,C as la,s as na}from"../chunks/E4Xaxz2I.js";import{b as ct}from"../chunks/BDVuqxz-.js";import{p as ca}from"../chunks/HEvLn5Co.js";import{M as yt}from"../chunks/C63kc6XK.js";import{F as Y,K as Nt,U as we,t as _a,j as va,d as ua,u as Rt,o as da,p as fa,q as ga,r as pa,c as Et}from"../chunks/z7V8QVZZ.js";import{t as It,f as St}from"../chunks/SGeIRAAh.js";import{S as Lt}from"../chunks/D3_WDWYc.js";import{n as _t,I as ba,e as Bt,w as ma,G as ha,z as Ze,l as ka,a as wa,c as xa}from"../chunks/Cf_TVUnr.js";import{T as ya,L as Ft,A as Ra}from"../chunks/DHk8bGmq.js";import{A as Ea}from"../chunks/DSH1OlOD.js";import{P as Ia,A as Sa}from"../chunks/DYzxjxe5.js";import{a as La}from"../chunks/DShqRj6q.js";import{H as Fa}from"../chunks/DlS-jwaZ.js";import{P as Aa}from"../chunks/CJs7jCQk.js";import{S as Pa}from"../chunks/CX_2_5jC.js";import{R as ja}from"../chunks/DaXXVVZ7.js";import{T as At}from"../chunks/CpgGpn1j.js";import{H as Ca}from"../chunks/D0P8unyA.js";import{C as Ta}from"../chunks/CqC2vKFB.js";import{S as qa}from"../chunks/BFKNyaF2.js";import{R as Ka}from"../chunks/B6kmmapD.js";import{P as Pt}from"../chunks/Dkegijom.js";import"../chunks/DbO4ygGo.js";function ot(a,t={},o,y){for(var S in o){var z=o[S];t[S]!==z&&(o[S]==null?a.style.removeProperty(S):a.style.setProperty(S,z,y))}}function Na(a,t,o,y){var S=a.__style;if(kt||S!==t){var z=ra(t,y);(!kt||z!==a.getAttribute("style"))&&(z==null?a.removeAttribute("style"):a.style.cssText=z),a.__style=t}else y&&(Array.isArray(y)?(ot(a,o==null?void 0:o[0],y[0]),ot(a,o==null?void 0:o[1],y[1],"important")):ot(a,o,y));return y}var Ba=u("<h2> </h2>"),za=u("<h3> </h3>"),Ma=u("<h4> </h4>"),Oa=(a,t)=>t.onCloseSection(),Da=u('<button class="shrink no-print p1" title="Close" aria-label="Close"><!></button>'),Ha=(a,t)=>t.onFocusSection(t.section),Ua=u('<button class="shrink no-print p1" title="Focus" aria-label="Focus"><!></button>'),Ga=(a,t,o)=>{t()[e(o).id]=a.target.checked},Ja=u('<span class="svelte-12fzojj"> </span>'),Wa=u('<b class="svelte-12fzojj"> </b>'),Va=u('<b class="svelte-12fzojj"> </b>'),Ya=(a,t,o)=>{e(t).id!=null&&e(t).type===Y.Ingredient&&(a.preventDefault(),o.onHighlightKeyword(e(t).id))},Qa=u("<button> </button>"),Xa=u("<span> </span>"),Za=(a,t,o)=>{let y=new Set;for(let S of e(t).fragments)S.id!=null&&S.type===Y.Ingredient&&y.add(S.id);o.onFocusIngredients(y)},$a=u('<button class="bottom-right-floater svelte-12fzojj" title="Focus ingredients" aria-label="Focus ingredients"><!></button>'),er=u('<label><input class="shrink" type="checkbox"> <div class="fragments grow ph0_5 lh2 svelte-12fzojj"></div> <!></label>'),tr=u('<div><header class="flex-row vertically-centered gap1"><!> <!></header> <div class="list"></div></div>');function ar(a,t){vt(t,!0);let o=ca(t,"checked_items",7);function y(h){switch(h.type){case Y.Ingredient:return"ingredient";case Y.Temperature:return"temperature";case Y.Percentage:return"percentage";case Y.Amount:return"amount";default:return""}}function S(h){return!!(t.selectedKeyword&&h.fragments.find(c=>c.id==t.selectedKeyword))}function z(h){if(!t.isFocused&&t.section.text!=="Ingredients"){let c=0;for(let C of h.fragments)C.type===Y.Ingredient&&(c+=1);if(c>=3)return!0}return!1}let G;ut(()=>{G&&t.isFocused&&t.section&&G.scrollIntoView()});var P=tr(),le=s(P),J=s(le);{var d=h=>{var c=Ba(),C=s(c,!0);i(c),K(()=>$(C,t.section.text)),n(h,c)},xe=(h,c)=>{{var C=L=>{var F=za(),x=s(F,!0);i(F),K(()=>$(x,t.section.text)),n(L,F)},te=(L,F)=>{{var x=T=>{var b=Ma(),_=s(b,!0);i(b),K(()=>$(_,t.section.text)),n(T,b)};w(L,T=>{t.section.level===4&&T(x)},F)}};w(h,L=>{t.section.level===3?L(C):L(te,!1)},c)}};w(J,h=>{t.section.level===2?h(d):h(xe,!1)})}var j=l(J,2);{var ee=h=>{var c=nt(),C=be(c);{var te=F=>{var x=Da();x.__click=[Oa,t];var T=s(x);la(T),i(x),n(F,x)},L=F=>{var x=Ua();x.__click=[Ha,t];var T=s(x);yt(T),i(x),n(F,x)};w(C,F=>{t.isFocused?F(te):F(L,!1)})}n(h,c)};w(j,h=>{t.section.rows.length&&h(ee)})}i(le);var W=l(le,2);Ae(W,21,()=>t.section.rows,Pe,(h,c)=>{var C=er();let te;var L=s(C);qt(L),L.__change=[Ga,o,c];var F=l(L,2);Ae(F,21,()=>e(c).fragments,Pe,(b,_)=>{var D=nt(),We=be(D);{var je=ae=>{var ne=Ja(),Te=s(ne,!0);i(ne),K(()=>$(Te,e(_).text)),n(ae,ne)},Ce=(ae,ne)=>{{var Te=ce=>{var _e=Wa(),me=s(_e,!0);i(_e),K(()=>$(me,e(_).text)),n(ce,_e)},$e=(ce,_e)=>{{var me=ve=>{var ue=Va(),ye=s(ue,!0);i(ue),K(()=>$(ye,e(_).text)),n(ve,ue)},q=(ve,ue)=>{{var ye=Q=>{var M=Qa();let he;M.__click=[Ya,_,t];var qe=s(M,!0);i(M),K((Ke,Re)=>{he=U(M,1,Ke,"svelte-12fzojj",he,Re),$(qe,e(_).text)},[()=>it(y(e(_))),()=>({failed:e(_).failed,converted:e(_).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(_).id})]),n(Q,M)},et=Q=>{var M=Xa();let he;var qe=s(M,!0);i(M),K((Ke,Re)=>{he=U(M,1,Ke,"svelte-12fzojj",he,Re),$(qe,e(_).text)},[()=>it(y(e(_))),()=>({failed:e(_).failed,converted:e(_).converted,selected:t.selectedKeyword&&t.selectedKeyword==e(_).id})]),n(Q,M)};w(ve,Q=>{e(_).type===Y.Ingredient?Q(ye):Q(et,!1)},ue)}};w(ce,ve=>{e(_).type===Y.Italic?ve(me):ve(q,!1)},_e)}};w(ae,ce=>{e(_).type===Y.Bold?ce(Te):ce($e,!1)},ne)}};w(We,ae=>{e(_).type===Y.Plain?ae(je):ae(Ce,!1)})}n(b,D)}),i(F);var x=l(F,2);{var T=b=>{var _=$a();_.__click=[Za,c,t];var D=s(_);yt(D),i(_),n(b,_)};w(x,b=>{z(e(c))&&b(T)})}i(C),Kt(C,(b,_)=>{var D;return(D=sa)==null?void 0:D(b,_)},()=>({enabled:t.isFocused,key:S(e(c))})),K(b=>{te=U(C,1,"relative selectable flex-row ph0",null,te,b),ta(L,o()[e(c).id])},[()=>({selected:S(e(c))})]),n(h,C)}),i(W),ct(W,h=>G=h,()=>G),i(P),K(()=>U(P,1,it(t.section.rows.length&&!t.isFocused?"card has-list pt0":""))),n(a,P),dt()}Tt(["click","change"]);var rr=u('<div class="spacer svelte-1rjut5w"></div> <div class="focus-pane svelte-1rjut5w"><div class="focus-pane-scroller svelte-1rjut5w"><div class="focus-pane-content"><!></div></div></div>',1);function ir(a,t){vt(t,!0);const o=500;let y=B(void 0),S=B(void 0),z=B("0");ut(()=>{if(t.id!=null&&e(y)&&e(S)){let j=e(S).clientHeight+20;p(z,`min(30vh, ${j}px)`)}});var G=rr(),P=l(be(G),2);let le;var J=s(P),d=s(J),xe=s(d);aa(xe,()=>t.content),i(d),ct(d,j=>p(S,j),()=>e(S)),i(J),Kt(J,(j,ee)=>{var W;return(W=na)==null?void 0:W(j)},()=>({key:t.id})),i(P),ct(P,j=>p(y,j),()=>e(y)),K(()=>le=Na(P,"",le,{height:e(z)})),It(1,P,()=>St,()=>({y:"100%",duration:o})),It(2,P,()=>St,()=>({y:"100%",duration:o})),n(a,G),dt()}const jt={keep_screen_awake:!0,show_colors:!0};function zt(){try{let a=localStorage.getItem(Nt.PREFERENCES);if(a)return{...jt,...JSON.parse(a)}}catch(a){console.error(a)}return{...jt}}function Mt(a){localStorage.setItem(Nt.PREFERENCES,JSON.stringify({...zt(),...a}))}function Ct(a){return zt()[a]}let Je=null;const st=async()=>{document.visibilityState==="visible"&&setTimeout(async()=>await Ot(),1e3)},lt=async(a,t=!0)=>{if(navigator.wakeLock){if(a)await Ot(),document.removeEventListener("visibilitychange",st),document.addEventListener("visibilitychange",st);else{console.info("Disabling wake lock");let o=Je;Je=null,o&&o.release(),document.removeEventListener("visibilitychange",st)}t&&Mt({keep_screen_awake:a})}},Ot=async()=>{try{if(Je)try{console.info("Releasing old wake lock"),await Je.release()}catch{}Je=await navigator.wakeLock.request("screen"),console.info("Wake Lock is active")}catch(a){console.error(a)}};var or=Xt(`<svg fill="white" height="16px" width="16px" style="min-width: 16px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.005 512.005" xml:space="preserve"><g><g><path d="M388.418,240.923L153.751,6.256c-8.341-8.341-21.824-8.341-30.165,0s-8.341,21.824,0,30.165L343.17,256.005
			L123.586,475.589c-8.341,8.341-8.341,21.824,0,30.165c4.16,4.16,9.621,6.251,15.083,6.251c5.461,0,10.923-2.091,15.083-6.251
			l234.667-234.667C396.759,262.747,396.759,249.264,388.418,240.923z"></path></g></g></svg>`);function sr(a){var t=or();n(a,t)}var lr=u("<input>"),nr=(a,t)=>Bt("/my-recipes",{page_data:{is_going_back:!0,previously_selected_recipe:e(t)}}),cr=u('<button class="shrink white-text flex-row vertically-centered p0 gap0_5" title="Go back" aria-label="Go back"><h1> </h1></button>'),_r=(a,t)=>{p(t,"")},vr=(a,t)=>{t()},ur=u('<button class="shrink pl1"><!></button> <button class="shrink pl1"><!></button>',1),dr=(a,t,o)=>{var y;p(t,((y=e(o))==null?void 0:y.title)||"",!0)},fr=u('<button class="shrink pl1" title="Edit" aria-label="Edit"><!></button>'),gr=u('<div class="flex-row vertically-centered grow svelte-wd4g5o"><div class="grow flex-col"><!></div> <!></div>'),pr=async(a,t,o)=>{e(t)?(_t("Reloading..."),await o(!0)):_t("No url!","error")},br=async(a,t)=>{if(e(t)){let o=da(e(t));await ma(o),_t("Copied markdown to clipboard :)")}},mr=async()=>{window.print()},hr=async(a,t,o)=>{p(t,e(o),!0)},kr=u('<button class="warning">Delete recipe</button>'),wr=u('<div class="flex-col svelte-wd4g5o"><a target="_blank">Open the original</a> <button>Get markdown</button> <button>Print</button> <a target="_blank">Report bug</a> <!> <!> <!></div>'),xr=u('<!> <!> <!> <!> <button title="Reload this recipe" aria-label="Reload this recipe" class="svelte-wd4g5o"><!></button> <!>',1),yr=u('<div class="card mt1"><h2>Loading...</h2></div>'),Rr=u('<div class="mla"><!></div>'),Er=(a,t,o)=>{t(o())},Ir=u('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Remove from current list</button>'),Sr=(a,t,o)=>{t(o())},Lr=u('<button class="mla rounded green p0_5 vertically-centered gap0_5"><!> Add to current list</button>'),Fr=(a,t)=>t(.5),Ar=(a,t)=>t(1),Pr=(a,t)=>t(2),jr=(a,t)=>t(we.IMPERIAL),Cr=(a,t)=>t(we.ORIGINAL),Tr=(a,t)=>t(we.METRIC),qr=(a,t,o)=>{p(t,Ge(e(o)),!0)},Kr=u('<div class="rounded black p0_5 green-text"> </div>'),Nr=u('<div class="shrink flex-row flex-end wrap gap0_5 bold"></div>'),Br=u('<div class="flex-row gap1 space-between no-print"><!> <!></div> <div class="flex-col gap1 mb1 mt1 no-print"><div class="flex-row vertically-centered wrap rgap0_5"><!></div> <div class="flex-row gap1 mb1 mt1 wrap"><div class="flex-row gap1"><div class="flex-row"><button>0.5x</button> <button>1x</button> <button>2x</button></div></div> <div class="flex-row grow-children"><button>Imperial</button> <button>Original</button> <button>Metric</button></div></div> <div class="mla flex-col wrap vertically-centered shrink-children gap0_5"><button class="mla rounded blue p0_5 vertically-centered gap0_5"><!> Add tags</button> <!></div></div> <div class="recipe-columns flex-col gap1 svelte-wd4g5o"><div class="flex-col gap1 svelte-wd4g5o"></div> <div class="flex-col gap1 svelte-wd4g5o"><!> <!></div></div>',1),zr=u('<div class="card mt1"><h2>ERROR: No recipe :/</h2></div>'),Mr=u('<!> <main class="svelte-wd4g5o"><div class="flex-col gap2 svelte-wd4g5o"><!></div> <!> <!></main> <!> <!>',1);function hi(a,t){vt(t,!0);const[o,y]=oa(),S=()=>Xe(h,"$data",o),z=()=>Xe(wa,"$all_recipes",o),G=()=>Xe(xa,"$all_shopping_lists",o),P=()=>Xe(ka,"$last_list_id",o),le=r=>{J(r,()=>e(x),()=>!0)},J=(r,f=xt,v=xt)=>{ar(r,{get section(){return f()},get isFocused(){return v()},get selectedKeyword(){return e(L)},get checked_items(){return e(F)},onHighlightKeyword:g=>{g===e(L)?p(L,null):(p(L,g,!0),g&&_e(new Set([g])))},onFocusIngredients:_e,onFocusSection:g=>{var k;f().id===((k=e(x))==null?void 0:k.id)?p(x,null):p(x,f(),!0)},onCloseSection:()=>{p(x,null)}})};let d=B(null);wt(()=>{xe()}),La(()=>{xe()});function xe(){let r=ba();r!==e(d)&&p(d,r,!0)}let j=B(Qe(we.ORIGINAL)),ee=B(1),W=B(Qe(Ct("show_colors")));const h=ea(null),c=V(()=>va(S(),e(W))),C=V(()=>e(d)?ga(e(d),z()):null),te=V(()=>e(d)?pa(e(d),z()):null);let L=B(null),F=B(Qe({})),x=B(null),T=B(null),b=B(null),_=B(!1),D=V(()=>fa(e(c),e(W),e(j),e(ee))),We=null;ut(()=>{e(d)!==We&&(We=e(d),(async()=>ae(!1))())});function je(r){r!==e(j)&&p(j,r,!0)}function Ce(r){Ze(r,e(ee))||p(ee,r,!0)}async function ae(r=!1){p(F,{},!0),p(_,!0),h.set(await _a(e(d),"",r)),p(_,!1),p(L,null),p(x,null)}function ne(){h&&h.update(r=>(r&&e(b)&&(r.title=e(b),Rt(Ge(r))),r)),p(b,null)}let Te=V(()=>{var r;return!!((r=G().find(f=>f.id===P()))!=null&&r.items.find(f=>f.recipe_url===e(d)))});function $e(r){let f=!1;for(let v of G())if(v.id===r){for(let g of v.items)g.recipe_url===e(d)&&(g.quantity+=1,f=!0);f||(f=!0,v.items.push({recipe_url:e(d),quantity:1})),Et(v);break}}function ce(r){for(let f of G())f.id===r&&(f.items=f.items.filter(v=>v.recipe_url!==e(d)),Et(f))}function _e(r){let f=[];for(let v of e(D).ingredients)for(let g of v.rows)g.fragments.find(k=>k.id&&r.has(k.id))&&f.push(Ge(g));p(x,{id:ha("section"),text:"Selected ingredients",level:3,rows:f},!0)}let me=B(Qe(Ct("keep_screen_awake"))),q=B(null);wt(()=>((async()=>await lt(e(me),!1))(),async()=>{await lt(!1,!1)}));let ve=V(()=>`https://github.com/loremdipso/recipease/issues/new?title=${encodeURIComponent("Broken URL")}&body=${encodeURIComponent(`URL in question: ${e(d)}

Why it is bad: TODO`)}&labels=parsing`);var ue=Mr(),ye=be(ue);const et=V(()=>({previously_selected_recipe:e(d)}));ya(ye,{back_path:"/my-recipes",get page_data(){return e(et)},title_snippet:v=>{var g=gr(),k=s(g),re=s(k);{var de=A=>{var R=lr();qt(R),Zt(R),$t("keypress",R,m=>{m.key==="Enter"&&(m.preventDefault(),m.stopPropagation(),ne())}),ia(R,()=>e(b),m=>p(b,m)),n(A,R)},ke=A=>{var R=cr();R.__click=[nr,d];var m=s(R),X=s(m,!0);i(m),i(R),K(()=>{var O;return $(X,(O=e(c))==null?void 0:O.title)}),n(A,R)};w(re,A=>{e(b)?A(de):A(ke,!1)})}i(k);var Ne=l(k,2);{var fe=A=>{var R=ur(),m=be(R);m.__click=[_r,b];var X=s(m);At(X),i(m);var O=l(m,2);O.__click=[vr,ne];var ie=s(O);Pa(ie),i(O),K(()=>{Fe(m,"title",e(b)?"Save":"Edit"),Fe(m,"aria-label",e(b)?"Save":"Edit"),Fe(O,"title",e(b)?"Save":"Edit"),Fe(O,"aria-label",e(b)?"Save":"Edit")}),n(A,R)},Be=A=>{var R=fr();R.__click=[dr,b,c];var m=s(R);Aa(m),i(R),n(A,R)};w(Ne,A=>{e(b)?A(fe):A(Be,!1)})}i(g),n(v,g)},extra_buttons:v=>{var g=xr(),k=be(g);Ka(k,{go_back:!0});var re=l(k,2);Ta(re,{go_back:!1});var de=l(re,2);Ca(de);var ke=l(de,2);{var Ne=m=>{qa(m,{onshare:async()=>{const X=new URL(window.location.href);X.search="",e(d)&&X.searchParams.set("url",e(d)),await navigator.share({title:"Here's a recipe for ya!",url:X.toString()})}})};w(ke,m=>{e(c)&&m(Ne)})}var fe=l(ke,2);fe.__click=[pr,d,ae];var Be=s(fe);ja(Be),i(fe);var A=l(fe,2);{var R=m=>{Fa(m,{items:O=>{var ie=wr(),Ee=s(ie);let Ie;var ze=l(Ee,2);ze.__click=[br,c];var Se=l(ze,2);Se.__click=[mr];var Le=l(Se,2);let Me;var Oe=l(Le,2);Lt(Oe,{text:"Enable colors",get checked(){return e(W)},onchange:N=>{p(W,N,!0),Mt({show_colors:N})}});var De=l(Oe,2);{var He=N=>{Lt(N,{text:"Keep screen on",get checked(){return e(me)},onchange:Z=>{p(me,Z,!0),lt(Z)}})};w(De,N=>{navigator.wakeLock&&N(He)})}var Ve=l(De,2);{var Ue=N=>{var Z=kr();Z.__click=[hr,T,d],n(N,Z)};w(Ve,N=>{e(c)&&N(Ue)})}i(ie),K((N,Z)=>{Fe(Ee,"href",e(d)),Ie=U(Ee,1,"button-like",null,Ie,N),Fe(Le,"href",e(ve)),Me=U(Le,1,"warning button-like",null,Me,Z)},[()=>({disabled:!e(d)}),()=>({disabled:!e(d)})]),n(O,ie)}})};w(A,m=>{e(c)&&m(R)})}n(v,g)},$$slots:{title_snippet:!0,extra_buttons:!0}});var Q=l(ye,2),M=s(Q),he=s(M);{var qe=r=>{var f=yr();n(r,f)},Ke=(r,f)=>{{var v=k=>{var re=Br(),de=be(re),ke=s(de);{var Ne=E=>{const I=V(()=>({url:e(C).url}));Ft(E,{url:"/my-recipes/recipe",get query_params(){return e(I)},go_back:!0,text:"Previous recipe",icon_prefix:oe=>{Ra(oe)},$$slots:{icon_prefix:!0}})};w(ke,E=>{e(C)&&E(Ne)})}var fe=l(ke,2);{var Be=E=>{var I=Rr(),ge=s(I);const oe=V(()=>({url:e(te).url}));Ft(ge,{url:"/my-recipes/recipe",get query_params(){return e(oe)},text:"Next recipe",icon_postfix:H=>{sr(H)},$$slots:{icon_postfix:!0}}),i(I),n(E,I)};w(fe,E=>{e(te)&&E(Be)})}i(de);var A=l(de,2),R=s(A),m=s(R);{var X=E=>{var I=nt(),ge=be(I);{var oe=H=>{var se=Ir();se.__click=[Er,ce,P];var at=s(se);At(at),rt(),i(se),n(H,se)},pe=H=>{var se=Lr();se.__click=[Sr,$e,P];var at=s(se);Pt(at),rt(),i(se),n(H,se)};w(ge,H=>{e(Te)?H(oe):H(pe,!1)})}n(E,I)};w(m,E=>{P()!==null&&E(X)})}i(R);var O=l(R,2),ie=s(O),Ee=s(ie),Ie=s(Ee);let ze;Ie.__click=[Fr,Ce];var Se=l(Ie,2);let Le;Se.__click=[Ar,Ce];var Me=l(Se,2);let Oe;Me.__click=[Pr,Ce],i(Ee),i(ie);var De=l(ie,2),He=s(De);let Ve;He.__click=[jr,je];var Ue=l(He,2);let N;Ue.__click=[Cr,je];var Z=l(Ue,2);let gt;Z.__click=[Tr,je],i(De),i(O);var pt=l(O,2),Ye=s(pt);Ye.__click=[qr,q,c];var Wt=s(Ye);Pt(Wt),rt(),i(Ye);var Vt=l(Ye,2);{var Yt=E=>{var I=Nr();Ae(I,21,()=>e(c).tags||[],Pe,(ge,oe)=>{var pe=Kr(),H=s(pe,!0);i(pe),K(()=>$(H,e(oe))),n(ge,pe)}),i(I),n(E,I)};w(Vt,E=>{var I;(I=e(c).tags)!=null&&I.length&&E(Yt)})}i(pt),i(A);var bt=l(A,2),tt=s(bt);Ae(tt,21,()=>e(D).ingredients,Pe,(E,I)=>{J(E,()=>e(I),()=>!1)}),i(tt);var mt=l(tt,2),ht=s(mt);Ae(ht,17,()=>e(D).instructions,Pe,(E,I)=>{J(E,()=>e(I),()=>!1)});var Qt=l(ht,2);Ae(Qt,17,()=>e(D).notes,Pe,(E,I)=>{J(E,()=>e(I),()=>!1)}),i(mt),i(bt),K((E,I,ge,oe,pe,H)=>{ze=U(Ie,1,"choice-button svelte-wd4g5o",null,ze,E),Le=U(Se,1,"choice-button svelte-wd4g5o",null,Le,I),Oe=U(Me,1,"choice-button svelte-wd4g5o",null,Oe,ge),Ve=U(He,1,"choice-button svelte-wd4g5o",null,Ve,oe),N=U(Ue,1,"choice-button svelte-wd4g5o",null,N,pe),gt=U(Z,1,"choice-button svelte-wd4g5o",null,gt,H)},[()=>({selected:Ze(e(ee),.5)}),()=>({selected:Ze(e(ee),1)}),()=>({selected:Ze(e(ee),2)}),()=>({selected:e(j)==we.IMPERIAL}),()=>({selected:e(j)==we.ORIGINAL}),()=>({selected:e(j)==we.METRIC})]),n(k,re)},g=k=>{var re=zr();n(k,re)};w(r,k=>{e(c)?k(v):k(g,!1)},f)}};w(he,r=>{e(_)?r(qe):r(Ke,!1)})}i(M);var Re=l(M,2);{var Dt=r=>{Ia(r,{text:"Are you sure?",accept:async()=>{e(T)&&(await ua(e(T)),p(T,null),Bt("/my-recipes",{page_data:{is_going_back:!0}}))},cancel:()=>{p(T,null)}})};w(Re,r=>{e(T)&&r(Dt)})}var Ht=l(Re,2);{var Ut=r=>{const f=V(()=>{var v;return(v=e(x))==null?void 0:v.id});ir(r,{content:le,get id(){return e(f)}})};w(Ht,r=>{e(x)&&r(Ut)})}i(Q);var ft=l(Q,2);Ea(ft,{});var Gt=l(ft,2);{var Jt=r=>{const f=V(()=>{var v;return((v=e(q))==null?void 0:v.tags)||[]});Sa(r,{get tags(){return e(f)},onclose:()=>{var g;let v=(g=Ge(e(q)))==null?void 0:g.tags;h.update(k=>(k&&(k.tags=v,Rt(Ge(k))),k)),p(q,null)},onaddtag:v=>{e(q)&&v&&(e(q).tags?e(q).tags.some(g=>g===v)||(e(q).tags.push(v),e(q).tags.sort()):e(q).tags=[v])},ondeletetag:v=>{var g;(g=e(q))!=null&&g.tags&&(e(q).tags=e(q).tags.filter(k=>k!==v))}})};w(Gt,r=>{e(q)&&r(Jt)})}n(a,ue),dt(),y()}Tt(["click"]);export{hi as component};
