import{n as te,a as _,d as oe,t as m,s as le,e as Q}from"./aHhSpOdM.js";import{p as se,l as u,m as ie,f as T,q as l,a as ne,c as t,s as i,z as y,r,o as e,t as Z}from"./BYTqjnmQ.js";import{i as G}from"./DZ2x0wit.js";import{e as ce,i as pe}from"./CLXJqfNh.js";import{r as H,s as _e}from"./DbSBZFay.js";import{O as ve,b as I}from"./Yh1PSW4n.js";import{g as de}from"./z7V8QVZZ.js";import{d as fe,v as ue,n as $,i as me,e as ge,g as be}from"./Cf_TVUnr.js";import{P as q}from"./Dkegijom.js";import"./DbO4ygGo.js";import{F as we}from"./DcnzjQnG.js";var he=te('<svg width="16px" height="16px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.7955 15.8111L21 21M18 10.5C18 14.6421 14.6421 18 10.5 18C6.35786 18 3 14.6421 3 10.5C3 6.35786 6.35786 3 10.5 3C14.6421 3 18 6.35786 18 10.5Z" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function ye(v){var o=he();_(v,o)}var ke=m('<div class="flex-row gap0_5 vertically-centered"><!> Recipe</div>'),xe=(v,o)=>{o()},Ce=(v,o)=>{l(o,!e(o))},Pe=m('<a class="blue rounded"> </a>'),Ae=m('<label class="flex-row wrap gap0_5 vertically-centered">Search: <div class="flex-row grow overflow-hidden"><input class="grow p0_5 mw0"></div></label> <div class="flex-col gap0_5 overflow-auto" style="max-height: 50vh"></div>',1),Fe=async(v,o)=>{o()},Oe=m(`OR <label class="flex-row wrap gap0_5 vertically-centered">Paste url: <div class="flex-row grow overflow-hidden"><input class="grow p0_5 mw0"> <button class="p0_5 green flex-row vertically-centered gap0_5"><!> Add</button></div></label> <pre class="p0_5 black rounded collapse">					Quick tip: if you install this app on your mobile device
					then it becomes a share target
				</pre>`,1),Se=m('<div class="flex-col gap1 text-center"><h1>Add a new recipe</h1> <div class="mla mra flex-row gap0_5"><button class="green rounded flex-row vertically-centered gap0_5"><!> Copy url from clipboard</button> <button class="blue rounded flex-row vertically-centered gap0_5"><!> Search for recipe</button></div> <!></div>'),Re=m("<!> <!>",1);function Ze(v,o){se(o,!0);let k=u(!1),x=u(!1),C=u(""),F=u(""),B=u(ie([]));async function J(){let a=await fe();a&&M(a)}let O=u(0);function K(){e(O)&&clearTimeout(e(O)),l(O,setTimeout(()=>{D()},300),!0)}async function D(){l(B,await de(e(F)),!0)}function E(){M(e(C))}function M(a){if(!ue(a)){$("That doesn't look like a url to me :/");return}if(me(a)){$("Sorry, that website is blocked","error");return}$("Found a url! Opening recipe..."),ge("/my-recipes/recipe",{query_params:{url:a}}),l(x,!1),l(k,!1)}var j=Re(),z=T(j);we(z,{title:"Copy recipe url from clipboard",onclick:async()=>{l(x,!0),l(k,!1)},content:L=>{var g=ke(),b=t(g);q(b),y(),r(g),_(L,g)},$$slots:{content:!0}});var N=i(z,2);{var U=a=>{ve(a,{click:()=>{l(x,!1)},content:g=>{var b=Se(),S=i(t(b),2),P=t(S);P.__click=[xe,J];var V=t(P);q(V),y(),r(P);var R=i(P,2);R.__click=[Ce,k];var W=t(R);ye(W),y(),r(R),r(S);var X=i(S,2);{var Y=d=>{var w=Ae(),f=T(w),h=i(t(f)),n=t(h);H(n),r(h),r(f);var p=i(f,2);ce(p,21,()=>e(B),pe,(s,c)=>{var A=Pe(),re=t(A,!0);r(A),Z(ae=>{_e(A,"href",ae),le(re,e(c).title)},[()=>be("/my-recipes/recipe",{url:e(c).url})]),_(s,A)}),r(p),Q("keypress",n,s=>{s.key==="Enter"?(s.preventDefault(),s.stopPropagation(),D()):K()}),I(n,()=>e(F),s=>l(F,s)),_(d,w)},ee=d=>{var w=Oe(),f=i(T(w)),h=i(t(f)),n=t(h);H(n);var p=i(n,2);p.__click=[Fe,E];var s=t(p);q(s),y(),r(p),r(h),r(f),y(2),Z(()=>p.disabled=!e(C)),Q("keypress",n,c=>{c.key==="Enter"&&(c.preventDefault(),c.stopPropagation(),E())}),I(n,()=>e(C),c=>l(C,c)),_(d,w)};G(X,d=>{e(k)?d(Y):d(ee,!1)})}r(b),_(g,b)},$$slots:{content:!0}})};G(N,a=>{e(x)&&a(U)})}_(v,j),ne()}oe(["click"]);export{Ze as A};
