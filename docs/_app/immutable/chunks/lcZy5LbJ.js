import{d as N,t as b,s as D,a as f,c as Y,e as Z}from"./SB0OVNle.js";import{p as Q,a as R,c as o,r as a,s as r,t as z,at as $,i as _,f as tt,z as at,B as F,G as et}from"./DSkh8qEa.js";import{O as U,b as rt}from"./gtfbXTp4.js";import{i as H}from"./CvGVVl0L.js";import{e as I,i as J}from"./C4ChMz49.js";import{r as ot}from"./B143Bn_A.js";import{a as K,s as lt}from"./CHrfQ6KJ.js";import"./RwBeWHpz.js";import{a as st}from"./BpVrWSQb.js";import{P as M}from"./DZmU10Ic.js";import{T as ct}from"./BaRewT1R.js";var nt=(l,t)=>{l.stopPropagation(),t.cancel()},it=(l,t)=>{l.stopPropagation(),t.accept()},_t=b('<div class="flex-col"><h1> </h1> <div class="mla flex-row gap1"><button>Cancel</button> <button>Accept</button></div></div>');function Dt(l,t){Q(t,!0),U(l,{get click(){return t.cancel},content:h=>{var p=_t(),d=o(p),x=o(d,!0);a(d);var i=r(d,2),g=o(i);g.__click=[nt,t];var w=r(g,2);w.__click=[it,t],a(i),a(p),z(()=>D(x,t.text)),f(h,p)},$$slots:{content:!0}}),R()}N(["click"]);var vt=(l,t,v)=>{t.ondeletetag(_(v))},dt=b('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),ut=(l,t,v)=>{t(_(v))},ft=b('<button class="rounded blue flex-row vertically-centered gap0_5"><!> </button>'),pt=(l,t)=>{t.onclose()},gt=(l,t)=>{t()},mt=b('<button class="flex-row rounded green gap0_5 vertically-centered" title="Save" aria-label="Save"><!> Add new tag</button>'),bt=b('<div class="flex-col gap1"><h2>Tags</h2> <div><h3>Current tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div><h3>Other tags</h3> <div class="flex-row wrap gap0_5 flex-start"></div></div> <div class="flex-row vertically-centered"><label class="flex-row wrap gap0_5">Create new tag: <input class="grow downcase"></label></div> <div class="flex-row flex-end gap1"><button class="mla">Close</button> <!></div></div>');function zt(l,t){Q(t,!0);const[v,h]=lt(),p=()=>K(st,"$all_recipes",v),d=()=>K(x,"$all_tags",v),x=$([...new Set(p().map(c=>c.tags).filter(c=>!!c).flat().toSorted())]);let i=at("");function g(){let c=_(i).trim().toLowerCase();F(i,""),w(c),d().indexOf(c)===-1&&x.update(m=>(m.push(c),m.sort(),m))}function w(c){t.onaddtag(c)}U(l,{click:()=>{t.onclose()},content:m=>{var y=bt(),P=r(o(y),2),B=r(o(P),2);I(B,21,()=>t.tags,J,(e,s)=>{var n=dt();n.__click=[vt,t,s];var k=o(n);ct(k);var S=r(k);a(n),z(()=>D(S,` ${_(s)??""}`)),f(e,n)}),a(B),a(P);var C=r(P,2),E=r(o(C),2);I(E,5,d,J,(e,s)=>{var n=Y(),k=tt(n);{var S=T=>{var u=ft();u.__click=[ut,w,s];var q=o(u);M(q);var X=r(q);a(u),z(()=>D(X,` ${_(s)??""}`)),f(T,u)};H(k,T=>{t.tags.some(u=>u===_(s))||T(S)})}f(e,n)}),a(E),a(C);var A=r(C,2),G=o(A),O=r(o(G));ot(O),a(G),a(A);var L=r(A,2),j=o(L);j.__click=[pt,t];var V=r(j,2);{var W=e=>{var s=mt();s.__click=[gt,g];var n=o(s);M(n),et(),a(s),f(e,s)};H(V,e=>{_(i)&&e(W)})}a(L),a(y),Z("keypress",O,e=>{e.key==="Enter"&&(e.stopPropagation(),e.preventDefault(),g())}),rt(O,()=>_(i),e=>F(i,e)),f(m,y)},$$slots:{content:!0}}),R(),h()}N(["click"]);export{zt as A,Dt as P};
